(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6547],{4284:function(e,t,s){Promise.resolve().then(s.bind(s,1248))},3639:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},740:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},5863:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3774:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},4794:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},1248:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S},dynamic:function(){return k}});var a=s(7437),l=s(2265),r=s(9376),n=s(7648),o=s(3145),i=s(5863),c=s(1723),d=s(4794),u=s(740),m=s(9763);let h=(0,m.Z)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);var x=s(2489),g=s(3774);let p=(0,m.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),f=(0,m.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var b=s(3639);let y=(0,m.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),j=(0,m.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var v=s(9889);let k="force-dynamic",N=e=>{let{message:t="Loading..."}=e;return(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center min-h-[60vh] text-center py-20",children:[(0,a.jsx)(i.Z,{className:"h-12 w-12 animate-spin text-blue-600 mb-4"}),(0,a.jsx)("span",{className:"text-lg font-medium text-gray-700",children:t})]})},w=e=>{var t,s;let{pkg:l}=e,r=(null===(s=l.images)||void 0===s?void 0:null===(t=s.split(",")[0])||void 0===t?void 0:t.trim())||"/images/placeholder.jpg";return(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden flex flex-col transition-all duration-300 hover:shadow-xl hover:scale-105 border border-gray-100 h-full",children:[(0,a.jsxs)("div",{className:"h-52 w-full relative flex-shrink-0",children:[(0,a.jsx)(o.default,{src:r,alt:l.name,fill:!0,className:"object-cover",sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw",priority:!1,onError:e=>{"/images/placeholder.jpg"!==e.currentTarget.src&&(e.currentTarget.src="/images/placeholder.jpg")}}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),(0,a.jsxs)("div",{className:"absolute top-3 right-3 bg-blue-600 text-white text-sm font-bold py-1.5 px-3 rounded-full shadow-md",children:["₹",l.base_price.toLocaleString("en-IN")]}),(0,a.jsxs)("div",{className:"absolute bottom-3 left-3 bg-white/90 text-blue-600 text-xs font-medium py-1 px-2 rounded-full flex items-center",children:[(0,a.jsx)(c.Z,{size:12,className:"mr-1"}),l.duration]})]}),(0,a.jsxs)("div",{className:"p-5 flex flex-col flex-grow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold leading-tight mb-2 text-gray-800",children:l.name}),(0,a.jsxs)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3 flex-grow",children:[" ",l.description||"Explore the beauty of the Andaman Islands with this package. Click View Details for the full itinerary."]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-auto pt-4 border-t border-gray-100",children:[(0,a.jsxs)("span",{className:"text-gray-600 text-sm",children:["From ",(0,a.jsxs)("span",{className:"font-semibold text-blue-600",children:["₹",l.base_price.toLocaleString("en-IN")]})]}),(0,a.jsxs)(n.default,{href:"/packages/".concat(l.id),className:"inline-flex items-center text-blue-600 hover:text-blue-800 font-medium text-sm group",children:["View Details",(0,a.jsx)("span",{className:"ml-1 transition-transform duration-300 group-hover:translate-x-1",children:"→"})]})]})]})]})};function R(){let e=(0,r.useRouter)(),t=(0,r.useSearchParams)(),[s,i]=(0,l.useState)({destination:t.get("destination")||"",duration:t.get("duration")||"",priceRange:t.get("priceRange")||""}),[m,k]=(0,l.useState)(!1),[R,S]=(0,l.useState)(parseInt(t.get("page")||"1",10)),[L]=(0,l.useState)(9),[C,F]=(0,l.useState)(null),[P,U]=(0,l.useState)([]),{data:Z,status:A}=(0,v.i)("/api/destinations"),[E,z]=(0,l.useState)([]);(0,l.useEffect)(()=>{"success"===A&&(null==Z?void 0:Z.data)&&z(Z.data)},[A,Z]);let D="/api/packages?page=".concat(R,"&limit=").concat(L),{data:T,error:M,status:O}=(0,v.i)(D);(0,l.useEffect)(()=>{"success"===O&&T?(U(T.packages||[]),F(T.pagination||null)):"error"===O&&(U([]),F(null))},[O,T]);let _=(0,l.useMemo)(()=>{let e=[...P];if(s.destination&&(e=e.filter(e=>(e.name+(e.description||"")).toLowerCase().includes(s.destination.toLowerCase()))),s.duration&&(e=e.filter(e=>{let t=e.duration.match(/^(\d+)\s*D/i);if(!t)return!1;let a=parseInt(t[1],10),l=parseInt(s.duration.replace("+",""),10);return!(isNaN(a)||isNaN(l))&&(s.duration.includes("+")?a>=l:a===l)})),s.priceRange){let t=s.priceRange.split("-").map(Number),a=t[0],l=t.length>1?t[1]:1/0;if(isNaN(a)){let t=Number(s.priceRange);isNaN(t)||(e=e.filter(e=>e.base_price>=t))}else e=e.filter(e=>e.base_price>=a&&e.base_price<=l)}return e},[s,P]),q=e=>{let{name:t,value:a}=e.target;i({...s,[t]:a}),I(1,!0)},H=()=>{i({destination:"",duration:"",priceRange:""}),I(1,!0)},I=(0,l.useCallback)(function(s){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(s<1)&&(!C||!(s>C.totalPages))&&(s!==R||a)&&(S(s),s!==R||a)){let a=new URLSearchParams(Array.from(t.entries()));a.set("page",s.toString()),e.push("/packages?".concat(a.toString()),{scroll:!1}),setTimeout(()=>window.scrollTo({top:400,behavior:"smooth"}),100)}},[C,R,e,t]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative bg-gradient-to-r from-cyan-600 to-blue-700 h-72 md:h-96",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 z-10"}),(0,a.jsxs)("div",{className:"absolute inset-0 z-0",children:[(0,a.jsx)(o.default,{src:"/images/packages-hero.jpg",alt:"Andaman tour packages - Desktop",fill:!0,className:"object-cover hidden md:block",priority:!0}),(0,a.jsx)(o.default,{src:"/images/packages-hero-mobile.jpg",alt:"Andaman tour packages - Mobile",fill:!0,className:"object-cover block md:hidden",priority:!0})]}),(0,a.jsxs)("div",{className:"container mx-auto px-4 h-full flex flex-col justify-center items-center relative z-20",children:[(0,a.jsx)("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-white text-center mb-3 md:mb-5 drop-shadow-lg",children:"Our Andaman Packages"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl text-white text-center max-w-2xl opacity-95 drop-shadow-md",children:"Find the perfect curated experience for your island getaway."}),(0,a.jsx)(n.default,{href:"#packages-grid",scroll:!0,className:"mt-6 bg-white text-blue-700 hover:bg-blue-50 font-semibold py-3 px-8 rounded-full transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:"Explore Packages"})]}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-12 md:h-16 overflow-hidden",children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",className:"absolute bottom-0 w-full h-auto",children:[" ",(0,a.jsx)("path",{fill:"#f9fafb",fillOpacity:"1",d:"M0,224L48,213.3C96,203,192,181,288,181.3C384,181,480,203,576,224C672,245,768,267,864,261.3C960,256,1056,224,1152,197.3C1248,171,1344,149,1392,138.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"})," "]})})]}),(0,a.jsx)("div",{id:"packages-grid",className:"bg-gray-50 min-h-screen py-12 md:py-16",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-10 md:mb-14",children:[(0,a.jsx)(d.Z,{className:"text-blue-600 mr-3 flex-shrink-0",size:24}),(0,a.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"Find Your Perfect Package"})]}),(0,a.jsx)("div",{className:"md:hidden mb-6 text-center",children:(0,a.jsxs)("button",{onClick:()=>k(!m),className:"...",children:[(0,a.jsx)(u.Z,{size:16,className:"mr-2"})," ",m?"Hide Filters":"Show Filters"]})}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-5 md:p-7 mb-10 border border-gray-100 ".concat(m?"block":"hidden"," md:block"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,a.jsxs)("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 flex items-center",children:[(0,a.jsx)(h,{className:"text-blue-600 mr-2",size:20})," Filter Packages"]}),(0,a.jsx)("button",{className:"md:hidden ...",onClick:()=>k(!1),children:(0,a.jsx)(x.Z,{size:20})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-5",children:[" ",(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"destination",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Destination"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-blue-500 pointer-events-none",size:16}),(0,a.jsxs)("select",{id:"destination",name:"destination",value:s.destination,onChange:q,className:"pl-9 pr-8 py-2.5 w-full text-sm border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white hover:border-blue-300 transition-colors appearance-none disabled:bg-gray-100",disabled:"loading"===A,children:[(0,a.jsx)("option",{value:"",children:"loading"===A?"Loading...":"All Destinations"}),E.map(e=>(0,a.jsxs)("option",{value:e.name,children:[" ",e.name]},e.id))]}),"error"===A&&(0,a.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Could not load destinations."})]}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1 italic",children:"Note: Filters by keyword match for now."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Duration"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-blue-500 pointer-events-none",size:16}),(0,a.jsxs)("select",{id:"duration",name:"duration",value:s.duration,onChange:q,className:"pl-9 pr-8 py-2.5 w-full text-sm border border-gray-300 rounded-xl ... appearance-none",children:[(0,a.jsx)("option",{value:"",children:"Any Duration"}),(0,a.jsx)("option",{value:"3",children:"3 Days"}),(0,a.jsx)("option",{value:"4",children:"4 Days"}),(0,a.jsx)("option",{value:"5",children:"5 Days"}),(0,a.jsx)("option",{value:"6",children:"6 Days"}),(0,a.jsx)("option",{value:"7",children:"7 Days"}),(0,a.jsx)("option",{value:"8+",children:"8+ Days"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"priceRange",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Price Range"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-blue-500 pointer-events-none",size:16}),(0,a.jsxs)("select",{id:"priceRange",name:"priceRange",value:s.priceRange,onChange:q,className:"pl-9 pr-8 py-2.5 w-full text-sm border border-gray-300 rounded-xl ... appearance-none",children:[(0,a.jsx)("option",{value:"",children:"Any Price"}),(0,a.jsx)("option",{value:"0-15000",children:"Under ₹15k"}),(0,a.jsx)("option",{value:"15000-25000",children:"₹15k - ₹25k"}),(0,a.jsx)("option",{value:"25000-40000",children:"₹25k - ₹40k"}),(0,a.jsx)("option",{value:"40000",children:"₹40k+"})]})]})]})]}),(0,a.jsx)("div",{className:"mt-5 pt-4 border-t border-gray-100 flex justify-end",children:(0,a.jsxs)("button",{onClick:H,className:"...",disabled:!s.destination&&!s.duration&&!s.priceRange,children:[(0,a.jsx)(f,{size:14,className:"mr-1"})," Clear Filters"]})})]}),"loading"===O?(0,a.jsx)(N,{message:"Loading Packages..."}):"error"===O?(0,a.jsxs)("div",{className:"text-center py-12 px-6 bg-red-50 ...",children:[(0,a.jsx)(b.Z,{className:"h-10 w-10 text-red-500 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-red-700 font-medium",children:"Could not load packages."}),(0,a.jsx)("p",{className:"text-red-600 text-sm mt-1",children:(null==M?void 0:M.message)||"An unknown error occurred."}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"...",children:" Try Again "})]}):(0,a.jsx)(a.Fragment,{children:_.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:_.map(e=>(0,a.jsx)(w,{pkg:e},e.id))}),C&&C.totalPages>1&&(0,a.jsxs)("div",{className:"flex justify-center items-center mt-10 md:mt-14 space-x-3",children:[(0,a.jsxs)("button",{onClick:()=>I(R-1),disabled:1===R,className:"...","aria-label":"Previous Page",children:[" ",(0,a.jsx)(y,{size:20})," "]}),(0,a.jsxs)("span",{className:"text-sm text-gray-700 font-medium",children:[" Page ",C.currentPage," of ",C.totalPages," "]}),(0,a.jsxs)("button",{onClick:()=>I(R+1),disabled:R===C.totalPages,className:"...","aria-label":"Next Page",children:[" ",(0,a.jsx)(j,{size:20})," "]})]})]}):(0,a.jsxs)("div",{className:"text-center py-16 bg-white rounded-2xl ...",children:[(0,a.jsx)(o.default,{src:"/images/no-results.svg",alt:"No packages found",width:150,height:150,className:"mx-auto mb-6 opacity-80"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2 text-gray-800",children:"No packages found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Try adjusting your filters or check back later."}),(0,a.jsx)("button",{onClick:H,className:"...",children:" Clear All Filters "})]})}),(0,a.jsx)("div",{className:"mt-16 md:mt-20 bg-gradient-to-r from-blue-600 to-blue-800 rounded-2xl p-8 md:p-10 text-center ...",children:(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-4 md:mb-5",children:"Can't find what you're looking for?"}),(0,a.jsx)("p",{className:"text-blue-100 mb-6 md:mb-8 max-w-2xl mx-auto",children:" Let us create a custom package tailored to your preferences, budget, and travel dates. "}),(0,a.jsx)(n.default,{href:"/custom-package",className:"...",children:" Create Custom Package "})]})})]})})]})}function S(){return(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)(N,{message:"Loading Page..."}),children:(0,a.jsx)(R,{})})}},9889:function(e,t,s){"use strict";s.d(t,{i:function(){return l},q:function(){return r}});var a=s(2265);function l(e,t){console.log("[useFetch] Hook initialized/re-rendered. URL:",e);let[s,l]=(0,a.useState)(null),[r,n]=(0,a.useState)(null),[o,i]=(0,a.useState)("idle"),c=JSON.stringify(t);return(0,a.useEffect)(()=>{console.log("[useFetch] useEffect triggered. URL:",e),(async()=>{if(console.log("[useFetch] fetchData started. URL:",e),!e){console.log("[useFetch] URL is null, setting status to idle."),i("idle"),l(null),n(null);return}console.log("[useFetch] Resetting state and setting status to loading."),i("loading"),l(null),n(null);try{let t;let s=JSON.parse(c||"{}");console.log("[useFetch] Attempting fetch. URL:",e,"Options:",s);let a=await fetch(e,{...s,credentials:"include"});console.log("[useFetch] Fetch completed. URL:",e,"Status:",a.status);try{console.log("[useFetch] Attempting response.json(). URL:",e),t=await a.json(),console.log("[useFetch] response.json() successful. URL:",e,"Result:",t)}catch(t){throw console.error("[useFetch] response.json() FAILED. URL:",e,"Error:",t),Error("Request failed with status ".concat(a.status," and non-JSON response."))}if(!a.ok){let s=(null==t?void 0:t.message)||a.statusText||"HTTP error! Status: ".concat(a.status);throw console.warn("[useFetch] Response not OK. Status:",a.status,"URL:",e,"Throwing error:",s),Error(s)}if(console.log("[useFetch] Response OK. Checking result.success. URL:",e),t.success)console.log("[useFetch] result.success is true. URL:",e),void 0!==t.data?(console.log("[useFetch] Setting data and status=success. URL:",e,"Data:",t.data),l(t.data),i("success")):(l(null),i("success"),console.warn("[useFetch] Fetch successful (result.success=true) but result.data is undefined. Setting data=null, status=success. URL: ".concat(e)));else{let s=t.message||"API returned success: false";throw console.warn("[useFetch] result.success is false. URL:",e,"Throwing error:",s),Error(s)}}catch(t){console.error("[useFetch] CATCH block error for URL ".concat(e,":"),t),console.log("[useFetch] Setting error state and status=error. URL:",e),n(t instanceof Error?t:Error("Unknown fetch error occurred")),i("error")}})()},[e,c]),console.log("[useFetch] Returning state. URL:",e,"Status:",o),{data:s,error:r,status:o,isLoading:"loading"===o}}function r(e){console.log("[useSubmit] Hook initialized/re-rendered. URL:",e);let[t,s]=(0,a.useState)(null),[l,r]=(0,a.useState)(null),[n,o]=(0,a.useState)("idle"),i=async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST";console.log("[useSubmit] submit function called. URL:",e,"Method:",a),console.log("[useSubmit] Resetting state and setting status=loading."),o("loading"),s(null),r(null);try{let l;let r={method:a,headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t),credentials:"include"};console.log("[useSubmit] Attempting fetch. URL:",e,"Options:",r);let n=await fetch(e,r);console.log("[useSubmit] Fetch completed. URL:",e,"Status:",n.status);try{console.log("[useSubmit] Attempting response.json(). URL:",e),l=await n.json(),console.log("[useSubmit] response.json() successful. URL:",e,"Result:",l)}catch(t){throw console.error("[useSubmit] response.json() FAILED. URL:",e,"Error:",t),Error("Request failed with status ".concat(n.status," and non-JSON response."))}if(console.log("[useSubmit] Checking response.ok and result.success. URL:",e),n.ok&&l.success){if(console.log("[useSubmit] Response OK and result.success is true. URL:",e),void 0!==l.data)return console.log("[useSubmit] Setting data and status=success. URL:",e,"Data:",l.data),s(l.data),o("success"),{success:!0,data:l.data};return s(null),o("success"),console.warn("[useSubmit] Submit successful (result.success=true) but result.data is undefined. Setting data=null, status=success. URL: ".concat(e)),{success:!0,data:null}}{let t=l.message||"API Error: Status ".concat(n.status,", Success Flag: ").concat(l.success);throw console.warn("[useSubmit] Response NOT OK or result.success is false. URL:",e,"Throwing error:",t),Error(t)}}catch(s){console.error("[useSubmit] CATCH block error. URL:",e,"Error:",s);let t=s instanceof Error?s.message:"Unknown submit error occurred";return console.log("[useSubmit] Setting error state and status=error. URL:",e),r(Error(t)),o("error"),{success:!1,error:t}}};return console.log("[useSubmit] Returning state. URL:",e,"Status:",n),{submit:i,data:t,error:l,status:n,isLoading:"loading"===n,reset:()=>{console.log("[useSubmit] reset function called."),s(null),r(null),o("idle")}}}}},function(e){e.O(0,[3847,7648,2971,2117,1744],function(){return e(e.s=4284)}),_N_E=e.O()}]);
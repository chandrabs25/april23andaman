(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7908],{1914:function(e,t,s){Promise.resolve().then(s.bind(s,5506)),Promise.resolve().then(s.bind(s,5036))},8133:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});let o=(0,s(9763).Z)("Hotel",[["path",{d:"M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z",key:"p9z69c"}],["path",{d:"m9 16 .348-.24c1.465-1.013 3.84-1.013 5.304 0L15 16",key:"1bvcvh"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M10 22v-6.5m4 0V22",key:"16gs4s"}]])},5863:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});let o=(0,s(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7692:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});let o=(0,s(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},4794:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});let o=(0,s(9763).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},9376:function(e,t,s){"use strict";var o=s(5475);s.o(o,"useParams")&&s.d(t,{useParams:function(){return o.useParams}}),s.o(o,"usePathname")&&s.d(t,{usePathname:function(){return o.usePathname}}),s.o(o,"useRouter")&&s.d(t,{useRouter:function(){return o.useRouter}}),s.o(o,"useSearchParams")&&s.d(t,{useSearchParams:function(){return o.useSearchParams}})},5506:function(e,t,s){"use strict";s.d(t,{default:function(){return x}});var o=s(7437),n=s(2265),a=s(7648),r=s(9763);let i=(0,r.Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var c=s(4794),l=s(8133);let u=(0,r.Z)("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);var d=s(7692),h=s(4603),g=s(9376),f=s(3340),y=()=>{let{logout:e}=(0,h.a)(),t=(0,g.useRouter)(),s=async()=>{try{await e(),(0,f.Am)({title:"Logged Out",description:"You have been successfully logged out."}),t.push("/auth/signin")}catch(e){console.error("Logout failed:",e),(0,f.Am)({variant:"destructive",title:"Logout Failed",description:"Could not log you out. Please try again."})}},n=[{href:"/dashboard",label:"Dashboard",icon:i},{href:"/services",label:"Services",icon:c.Z},{href:"/hotels",label:"Hotels",icon:l.Z},{href:"/bookings",label:"Bookings",icon:u}];return(0,o.jsxs)("aside",{className:"w-64 bg-gray-800 text-white h-screen fixed top-0 left-0 flex flex-col shadow-lg",children:[(0,o.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,o.jsx)("h2",{className:"text-xl font-semibold",children:"Vendor Panel"})}),(0,o.jsx)("nav",{className:"flex-grow p-4 space-y-2",children:n.map(e=>(0,o.jsxs)(a.default,{href:e.href,className:"flex items-center px-3 py-2 rounded-md text-gray-300 hover:bg-gray-700 hover:text-white transition-colors duration-150",children:[(0,o.jsx)(e.icon,{className:"h-5 w-5 mr-3"}),(0,o.jsx)("span",{children:e.label})]},e.href))}),(0,o.jsx)("div",{className:"p-4 border-t border-gray-700 mt-auto",children:(0,o.jsxs)("button",{onClick:s,className:"w-full flex items-center justify-center px-3 py-2 rounded-md text-gray-300 bg-red-600 hover:bg-red-700 hover:text-white transition-colors duration-150",children:[(0,o.jsx)(d.Z,{className:"h-5 w-5 mr-2"}),(0,o.jsx)("span",{children:"Logout"})]})})]})},p=s(5036),m=s(5863);function x(e){let{children:t}=e,s=(0,g.usePathname)(),a=(0,g.useRouter)(),{user:r,isLoading:i,isAuthenticated:c}=(0,p.u)(),l=(null==s?void 0:s.endsWith("/login"))||(null==s?void 0:s.endsWith("/register"));return i?(0,o.jsxs)("div",{className:"flex justify-center items-center h-screen w-full",children:[" ",(0,o.jsx)(m.Z,{className:"h-8 w-8 animate-spin text-blue-600 mr-3"}),(0,o.jsx)("span",{children:"Loading Vendor Area..."})]}):((0,n.useEffect)(()=>{i||c||l||(console.log("VendorLayoutContent: Not authenticated, redirecting to /login"),a.replace("/login"))},[i,c,l,a]),c||l)?(0,o.jsxs)(o.Fragment,{children:[!l&&(0,o.jsx)(y,{}),(0,o.jsx)("main",{className:"flex-grow p-6 ".concat(l?"":"ml-64"),children:t})]}):(0,o.jsxs)("div",{className:"flex justify-center items-center h-screen w-full",children:[" ",(0,o.jsx)(m.Z,{className:"h-8 w-8 animate-spin text-blue-600 mr-3"}),(0,o.jsx)("span",{children:"Redirecting to login..."})]})}},3340:function(e,t,s){"use strict";s.d(t,{Am:function(){return u}}),s(2265);let o=0,n=new Map,a=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},r=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?a(s):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],c={toasts:[]};function l(e){c=r(c,e),i.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>l({type:"DISMISS_TOAST",toastId:s});return l({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||n()}}}),{id:s,dismiss:n,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:s}})}}},4603:function(e,t,s){"use strict";s.d(t,{H:function(){return i},a:function(){return c}});var o=s(7437),n=s(2265),a=s(9376);let r=(0,n.createContext)(void 0),i=e=>{let{children:t}=e,[s,i]=(0,n.useState)(null),[c,l]=(0,n.useState)(!0),u=(0,a.useRouter)(),d=(0,n.useCallback)(async()=>{try{console.log("Checking auth state via /api/auth/me...");let e=await fetch("/api/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"}),t=await e.json();e.ok&&t.success&&t.data?(console.log("Auth check successful, user found:",t.data),i(t.data)):(console.log("Auth check failed or no user session found."),i(null))}catch(e){console.error("Error checking auth state:",e),i(null)}finally{l(!1)}},[]);(0,n.useEffect)(()=>{l(!0),d()},[d]);let h=(0,n.useCallback)(async(e,t)=>{l(!0);try{console.log("Attempting login with:",e);let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t}),credentials:"include"}),o=await s.json();if(s.ok&&o.success&&o.data)return console.log("Login successful:",o.data),i(o.data),l(!1),!0;return console.error("Login API failed:",o.message),i(null),l(!1),!1}catch(e){return console.error("Login fetch error:",e),i(null),l(!1),!1}},[]),g=(0,n.useCallback)(async(e,t,s)=>{l(!0);try{console.log("Attempting registration for:",t);let o=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:s})}),n=await o.json();if(o.ok&&n.success)return console.log("Registration successful",n.message),l(!1),{success:!0,message:n.message||"Registration successful!"};return console.error("Registration API failed:",n.message),l(!1),{success:!1,message:n.message||"Registration failed."}}catch(e){return console.error("Registration fetch error:",e),l(!1),{success:!1,message:"An unexpected error occurred."}}},[]),f=(0,n.useCallback)(async()=>{try{console.log("Logging out..."),await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(e){console.error("Logout API call failed:",e)}finally{i(null),console.log("Redirecting to signin page after logout."),u.push("/auth/signin")}},[u]);return(0,o.jsx)(r.Provider,{value:{user:s,isAuthenticated:!!s,isLoading:c,login:h,register:g,logout:f,checkAuthState:d},children:t})},c=()=>{let e=(0,n.useContext)(r);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5036:function(e,t,s){"use strict";s.d(t,{VendorAuthProvider:function(){return i},u:function(){return c}});var o=s(7437),n=s(2265),a=s(9376);let r=(0,n.createContext)(void 0),i=e=>{let{children:t}=e,[s,i]=(0,n.useState)(null),[c,l]=(0,n.useState)(!0),u=(0,a.useRouter)(),d=(0,n.useCallback)(async()=>{try{console.log("Checking vendor auth state via /api/vendor/auth/me...");let e=await fetch("/api/vendor/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"}),t=await e.json();e.ok&&t.success&&t.data?(console.log("Vendor auth check successful, user found:",t.data),i(t.data)):(console.log("Vendor auth check failed or no user session found."),i(null))}catch(e){console.error("Error checking vendor auth state:",e),i(null)}finally{l(!1)}},[]);(0,n.useEffect)(()=>{l(!0),d()},[d]);let h=(0,n.useCallback)(async(e,t)=>{l(!0);try{console.log("Attempting vendor login with:",e);let s=await fetch("/api/vendor/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t}),credentials:"include"}),o=await s.json();if(s.ok&&o.success&&o.data)return console.log("Vendor login successful:",o.data),i(o.data),l(!1),!0;return console.error("Vendor login API failed:",o.message),i(null),l(!1),!1}catch(e){return console.error("Vendor login fetch error:",e),i(null),l(!1),!1}},[]),g=(0,n.useCallback)(async(e,t,s)=>{l(!0);try{console.log("Attempting vendor registration for:",t);let o=await fetch("/api/vendor/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:s})}),n=await o.json();if(o.ok&&n.success)return console.log("Vendor registration successful",n.message),l(!1),{success:!0,message:n.message||"Registration successful!"};return console.error("Vendor registration API failed:",n.message),l(!1),{success:!1,message:n.message||"Registration failed."}}catch(e){return console.error("Vendor registration fetch error:",e),l(!1),{success:!1,message:"An unexpected error occurred."}}},[]),f=(0,n.useCallback)(async()=>{try{console.log("Logging out vendor..."),await fetch("/api/vendor/auth/logout",{method:"POST",credentials:"include"})}catch(e){console.error("Vendor logout API call failed:",e)}finally{i(null),console.log("Redirecting to vendor login page after logout."),u.push("/login")}},[u]);return(0,o.jsx)(r.Provider,{value:{user:s,isAuthenticated:!!s,isLoading:c,login:h,register:g,logout:f,checkAuthState:d},children:t})},c=()=>{let e=(0,n.useContext)(r);if(void 0===e)throw Error("useVendorAuth must be used within a VendorAuthProvider");return e}}},function(e){e.O(0,[1451,2971,2117,1744],function(){return e(e.s=1914)}),_N_E=e.O()}]);
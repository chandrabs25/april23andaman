(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7908],{7590:function(e,t,s){Promise.resolve().then(s.bind(s,2263)),Promise.resolve().then(s.bind(s,5036)),Promise.resolve().then(s.t.bind(s,4339,23))},5005:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]])},7411:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("CalendarCheck",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]])},875:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},8133:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Hotel",[["path",{d:"M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z",key:"p9z69c"}],["path",{d:"m9 16 .348-.24c1.465-1.013 3.84-1.013 5.304 0L15 16",key:"1bvcvh"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M10 22v-6.5m4 0V22",key:"16gs4s"}]])},5863:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7692:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},6840:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},4794:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},6595:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},2369:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,s){"use strict";var r=s(5475);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},2263:function(e,t,s){"use strict";s.d(t,{default:function(){return N}});var r=s(7437),a=s(2265),n=s(7648),i=s(9376),o=s(9763);let l=(0,o.Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var c=s(5005),d=s(2369),u=s(6595),h=s(4794),m=s(8133),f=s(7411),y=s(875),x=s(7692),g=s(2489),p=s(6840);let b=(0,o.Z)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);var v=s(5036),k=s(3340),w=()=>{let{user:e,logout:t,isAuthenticated:s}=(0,v.u)(),o=(0,i.useRouter)(),w=(0,i.usePathname)(),[j,N]=(0,a.useState)(!1),[Z,S]=(0,a.useState)(null),P=async()=>{try{await t(),(0,k.Am)({title:"Logged Out",description:"You have been successfully logged out."}),o.push("/login")}catch(e){console.error("Logout failed:",e),(0,k.Am)({variant:"destructive",title:"Logout Failed",description:"Could not log you out. Please try again."})}},A=[{href:"/dashboard",label:"Dashboard",icon:l,children:[{href:"/dashboard?tab=overview",label:"Overview",icon:c.Z,isPageSpecific:!0},{href:"/dashboard?tab=profile",label:"Profile",icon:d.Z,isPageSpecific:!0},{href:"/dashboard?tab=reviews",label:"Reviews",icon:u.Z,isPageSpecific:!0}]},{href:"/my-services",label:"Services",icon:h.Z},{href:"/my-hotels",label:"Hotels",icon:m.Z},{href:"/manage-bookings",label:"Bookings",icon:f.Z}],T=e=>{S(Z===e?null:e)};(0,a.useEffect)(()=>{N(!1),S(null)},[w]);let C=(e,t)=>{let s=w===e.href||e.children&&e.children.some(e=>w===e.href||w.startsWith(e.href.split("?")[0]+"?tab="));return e.children?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>T(e.label),className:"flex items-center px-3 py-2  text-sm font-medium ".concat(s?"bg-gray-700 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"," transition-colors duration-150 w-full text-left md:w-auto"),style:{borderRadius:"0.5rem"},children:[(0,r.jsx)(e.icon,{className:"h-5 w-5 mr-2 ".concat(t?"":"md:mr-2")}),e.label,(0,r.jsx)(y.Z,{className:"h-4 w-4 ml-1 transform transition-transform duration-150 ".concat(Z===e.label?"rotate-180":"")})]}),Z===e.label&&(0,r.jsx)("div",{className:"".concat(t?"pl-4 static":"absolute left-0 mt-2 w-48  shadow-lg bg-gray-800 ring-1 ring-black ring-opacity-5 z-50"),style:{borderRadius:"0.5rem"},children:(0,r.jsx)("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:e.children.map(e=>(0,r.jsxs)(n.default,{href:e.href,onClick:()=>{t&&N(!1),S(null)},className:"flex items-center px-4 py-2 text-sm ".concat(w===e.href?"bg-gray-700 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white","  m-1"),style:{borderRadius:"0.5rem"},role:"menuitem",children:[(0,r.jsx)(e.icon,{className:"h-4 w-4 mr-2"}),e.label]},e.href))})})]},e.label):(0,r.jsxs)(n.default,{href:e.href,onClick:()=>{t&&N(!1),S(null)},className:"flex items-center px-3 py-2 text-sm font-medium ".concat(s?"bg-gray-700 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"," transition-colors duration-150"),style:{borderRadius:"0.5rem"},children:[(0,r.jsx)(e.icon,{className:"h-5 w-5 mr-2 ".concat(t?"":"md:mr-2")}),e.label]},e.href)};return(0,r.jsxs)("nav",{className:"bg-gray-900 text-white shadow-lg sticky top-0 z-50",children:[(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(n.default,{href:"/dashboard",className:"flex-shrink-0 text-white text-xl font-semibold",children:"Vendor Panel"}),(0,r.jsx)("div",{className:"hidden md:block ml-10",children:(0,r.jsx)("div",{className:"flex items-baseline space-x-4",children:A.map(e=>C(e,!1))})})]}),(0,r.jsx)("div",{className:"hidden md:block",children:(0,r.jsxs)("div",{className:"ml-4 flex items-center md:ml-6",children:[s&&e&&(0,r.jsxs)("span",{className:"text-gray-300 text-sm mr-3",children:["Hi, ",e.first_name||e.email]}),(0,r.jsxs)("button",{onClick:P,className:"flex items-center bg-red-600 hover:bg-red-700 text-white px-3 py-2 text-sm font-medium transition-colors duration-150",style:{borderRadius:"0.5rem"},children:[(0,r.jsx)(x.Z,{className:"h-5 w-5 mr-1"}),"Logout"]})]})}),(0,r.jsx)("div",{className:"-mr-2 flex md:hidden",children:(0,r.jsxs)("button",{onClick:()=>N(!j),type:"button",className:"bg-gray-800 inline-flex items-center justify-center p-2 text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white","aria-controls":"mobile-menu","aria-expanded":j,style:{borderRadius:"0.5rem"},children:[(0,r.jsx)("span",{className:"sr-only",children:"Open main menu"}),j?(0,r.jsx)(g.Z,{className:"block h-6 w-6","aria-hidden":"true"}):(0,r.jsx)(p.Z,{className:"block h-6 w-6","aria-hidden":"true"})]})})]})}),j&&(0,r.jsxs)("div",{className:"md:hidden",id:"mobile-menu",children:[(0,r.jsx)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:A.map(e=>C(e,!0))}),(0,r.jsxs)("div",{className:"pt-4 pb-3 border-t border-gray-700",children:[s&&e&&(0,r.jsxs)("div",{className:"flex items-center px-5 mb-3",children:[(0,r.jsx)(b,{className:"h-8 w-8 text-gray-400 mr-2"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-base font-medium leading-none text-white",children:e.first_name||"Vendor"}),(0,r.jsx)("div",{className:"text-sm font-medium leading-none text-gray-400",children:e.email})]})]}),(0,r.jsx)("div",{className:"px-2 space-y-1",children:(0,r.jsxs)("button",{onClick:P,className:"w-full flex items-center justify-start bg-red-600 hover:bg-red-700 text-white px-3 py-2  text-base font-medium transition-colors duration-150",style:{borderRadius:"0.5rem"},children:[(0,r.jsx)(x.Z,{className:"h-5 w-5 mr-2"}),"Logout"]})})]})]})]})},j=s(5863);function N(e){let{children:t}=e,s=(0,i.usePathname)(),n=(0,i.useRouter)(),{user:o,isLoading:l,isAuthenticated:c}=(0,v.u)(),d=(null==s?void 0:s.endsWith("/login"))||(null==s?void 0:s.endsWith("/register"));return l?(0,r.jsxs)("div",{className:"flex justify-center items-center h-screen w-full bg-gray-100",children:[(0,r.jsx)(j.Z,{className:"h-8 w-8 animate-spin text-blue-600 mr-3"}),(0,r.jsx)("span",{children:"Loading Vendor Area..."})]}):((0,a.useEffect)(()=>{l||c||d||(console.log("VendorLayoutContent: Not authenticated, redirecting to /login"),n.replace("/login"))},[l,c,d,n]),c||d)?(0,r.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-100",children:[!d&&(0,r.jsx)(w,{}),(0,r.jsx)("main",{className:"flex-grow p-4 md:p-6 w-full",children:t})]}):(0,r.jsxs)("div",{className:"flex justify-center items-center h-screen w-full bg-gray-100",children:[(0,r.jsx)(j.Z,{className:"h-8 w-8 animate-spin text-blue-600 mr-3"}),(0,r.jsx)("span",{children:"Redirecting to login..."})]})}},3340:function(e,t,s){"use strict";s.d(t,{Am:function(){return d}}),s(2265);let r=0,a=new Map,n=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],l={toasts:[]};function c(e){l=i(l,e),o.forEach(e=>{e(l)})}function d(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}},5036:function(e,t,s){"use strict";s.d(t,{VendorAuthProvider:function(){return o},u:function(){return l}});var r=s(7437),a=s(2265),n=s(9376);let i=(0,a.createContext)(void 0),o=e=>{let{children:t}=e,[s,o]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0),d=(0,n.useRouter)(),u=(0,a.useCallback)(async()=>{try{console.log("Checking vendor auth state via /api/vendor/auth/me...");let e=await fetch("/api/vendor/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"}),t=await e.json();e.ok&&t.success&&t.data?(console.log("Vendor auth check successful, user found:",t.data),o(t.data)):(console.log("Vendor auth check failed or no user session found."),o(null))}catch(e){console.error("Error checking vendor auth state:",e),o(null)}finally{c(!1)}},[]);(0,a.useEffect)(()=>{c(!0),u()},[u]);let h=(0,a.useCallback)(async(e,t)=>{c(!0);try{console.log("Attempting vendor login with:",e);let s=await fetch("/api/vendor/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t}),credentials:"include"}),r=await s.json();if(s.ok&&r.success&&r.data)return console.log("Vendor login successful:",r.data),o(r.data),c(!1),!0;return console.error("Vendor login API failed:",r.message),o(null),c(!1),!1}catch(e){return console.error("Vendor login fetch error:",e),o(null),c(!1),!1}},[]),m=(0,a.useCallback)(async(e,t,s)=>{c(!0);try{console.log("Attempting vendor registration for:",t);let r=await fetch("/api/vendor/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:s})}),a=await r.json();if(r.ok&&a.success)return console.log("Vendor registration successful",a.message),c(!1),{success:!0,message:a.message||"Registration successful!"};return console.error("Vendor registration API failed:",a.message),c(!1),{success:!1,message:a.message||"Registration failed."}}catch(e){return console.error("Vendor registration fetch error:",e),c(!1),{success:!1,message:"An unexpected error occurred."}}},[]),f=(0,a.useCallback)(async()=>{try{console.log("Logging out vendor..."),await fetch("/api/vendor/auth/logout",{method:"POST",credentials:"include"})}catch(e){console.error("Vendor logout API call failed:",e)}finally{o(null),console.log("Redirecting to vendor login page after logout."),d.push("/login")}},[d]);return(0,r.jsx)(i.Provider,{value:{user:s,isAuthenticated:!!s,isLoading:l,login:h,register:m,logout:f,checkAuthState:u},children:t})},l=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useVendorAuth must be used within a VendorAuthProvider");return e}},4339:function(){}},function(e){e.O(0,[1740,1451,2971,2117,1744],function(){return e(e.s=7590)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9133],{418:function(e,s,t){Promise.resolve().then(t.bind(t,2369))},5863:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});let i=(0,t(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4794:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});let i=(0,t(9763).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},2369:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return v},dynamic:function(){return h}});var i=t(7437),a=t(2265),r=t(7648),l=t(3145),n=t(5863),c=t(4794),o=t(9763);let d=(0,o.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),u=(0,o.Z)("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),m=(0,o.Z)("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),p=(0,o.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var x=t(9889);let h="force-dynamic",g=e=>{let{text:s="Loading..."}=e;return(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center p-8",children:[(0,i.jsx)(n.Z,{className:"h-8 w-8 animate-spin text-blue-600 mb-2"}),(0,i.jsx)("p",{className:"text-gray-500",children:s})]})},b=e=>e?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",y=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||"string"==typeof e&&!e.trim().startsWith("[")&&!e.trim().startsWith("{"))return s;try{return JSON.parse(e)}catch(t){return console.error("Failed to parse JSON:",t,"Input:",e),s}};function v(){let[e,s]=(0,a.useState)([]),{data:t,error:o,status:h}=(0,x.i)("/api/vendor/services"),v="loading"===h||"idle"===h,f=(null==o?void 0:o.message)||null,{data:j,error:N,status:w}=(0,x.i)("/api/islands"),S="loading"===w||"idle"===w,[k,A]=(0,a.useState)(null),[R,L]=(0,a.useState)(!1),[U,_]=(0,a.useState)({name:"",description:"",price:"",image_url:"",availability:[],type:"activity",island_id:""}),[F,E]=(0,a.useState)({}),{submit:M,status:T,error:P,reset:C}=(0,x.q)("/api/vendor/services"),{submit:q,status:O,error:D,reset:I}=(0,x.q)(""),{submit:Z,status:z,error:H,reset:J}=(0,x.q)(""),K="loading"===T,[V,W]=(0,a.useState)("");(0,a.useEffect)(()=>{"success"===h&&t&&s(t.map(e=>{var s,t;return{...e,isActive:1===e.is_active,image_url:null===(t=e.images)||void 0===t?void 0:null===(s=t.split(",")[0])||void 0===s?void 0:s.trim(),parsedAvailability:y(e.availability,[])}}))},[h,t]);let B=e=>{let{name:s,value:t}=e.target;_(e=>({...e,[s]:t})),F[s]&&E(e=>({...e,[s]:void 0}))},Y=(e,s,t)=>{_(i=>{let a=[...i.availability];return t?a.some(t=>t.day===e&&t.time===s)||a.push({day:e,time:s}):a=a.filter(t=>!(t.day===e&&t.time===s)),{...i,availability:a}}),F.availability&&E(e=>({...e,availability:void 0}))},G=(e,s)=>U.availability.some(t=>t.day===e&&t.time===s),Q=e=>{_({name:e.name,description:e.description||"",price:e.price.toString(),image_url:e.image_url||"",type:e.type,availability:e.parsedAvailability||[],island_id:e.island_id.toString()}),A(e),L(!0),E({}),W(""),C(),window.scrollTo({top:0,behavior:"smooth"})},X=()=>{let e={};if(U.name.trim()||(e.name="Service name is required"),U.description.trim()||(e.description="Description is required"),U.price.trim()){let s=parseFloat(U.price);(isNaN(s)||s<=0)&&(e.price="Price must be a positive number")}else e.price="Price is required";return U.type.trim()||(e.type="Service type is required"),(!U.island_id.trim()||isNaN(parseInt(U.island_id)))&&(e.island_id="Please select a valid island"),Array.isArray(U.availability)&&0!==U.availability.length||(e.availability="Select at least one availability slot"),E(e),0===Object.keys(e).length},$=async e=>{let t;if(e.preventDefault(),!X())return;W(""),E({});let i=parseFloat(U.price),a=parseInt(U.island_id,10),r={name:U.name,description:U.description,price:isNaN(i)?0:i,type:U.type,island_id:isNaN(a)?null:a,availability:U.availability,images:U.image_url||null};if(console.log("Submitting Service Data:",r),(t=k?await M(r,"PUT","/api/vendor/services/".concat(k.id)):await M(r,"POST")).success){W(k?'Service "'.concat(U.name,'" updated successfully!'):'New service "'.concat(U.name,'" added successfully!')),L(!1);let e=t.data;if(e){var l,n;let t={...e,isActive:1===e.is_active,image_url:null===(n=e.images)||void 0===n?void 0:null===(l=n.split(",")[0])||void 0===l?void 0:l.trim(),parsedAvailability:y(e.availability,[])};k?s(e=>e.map(e=>e.id===k.id?t:e)):s(e=>[...e,t])}else console.warn("API success but no data returned for immediate state update.")}else E({general:t.error||"An unknown error occurred during submission."})},ee=async e=>{if(window.confirm("Are you sure you want to delete this service? This action cannot be undone.")){W(""),I();let t=await q({},"DELETE","/api/vendor/services/".concat(e));t.success?(s(s=>s.filter(s=>s.id!==e)),W("Service deleted successfully")):alert("Failed to delete service: ".concat(t.error||"Unknown error"))}},es=async(e,t)=>{let i=!t;W(""),J();let a={isActive:i},r="/api/vendor/services/".concat(e,"/status");console.log("[handleToggleServiceStatus] Attempting PATCH request to: ".concat(r," with body:"),a);let l=await Z(a,"PATCH",r);l.success?(s(s=>s.map(s=>s.id===e?{...s,isActive:i,is_active:i?1:0}:s)),W("Service status updated successfully")):alert("Failed to update service status: ".concat(l.error||"Unknown error"))},et=["08:00 AM","09:00 AM","10:00 AM","11:00 AM","12:00 PM","01:00 PM","02:00 PM","03:00 PM","04:00 PM","05:00 PM"];return(0,i.jsx)("div",{className:"bg-gray-50 min-h-screen py-12",children:(0,i.jsxs)("div",{className:"container mx-auto px-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Manage Services"}),(0,i.jsx)(r.default,{href:"/vendor/dashboard",className:"text-sm text-blue-600 hover:text-blue-800",children:" ← Back to Dashboard "})]}),V&&(0,i.jsxs)("div",{className:"mb-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:[" ",(0,i.jsx)("span",{className:"block sm:inline",children:V})," "]}),f&&!v&&(0,i.jsxs)("div",{className:"mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[" ",(0,i.jsxs)("span",{className:"block sm:inline",children:["Error loading services: ",f]})," "]}),F.general&&(0,i.jsxs)("div",{className:"mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[" ",(0,i.jsx)("span",{className:"block sm:inline",children:F.general})," "]}),R?(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mb-8 border border-blue-200",children:[(0,i.jsxs)("div",{className:"px-6 py-4 border-b bg-gray-50",children:[" ",(0,i.jsx)("h2",{className:"font-semibold text-lg",children:k?"Edit Service":"Add New Service"})," "]}),(0,i.jsx)("div",{className:"p-6",children:(0,i.jsxs)("form",{onSubmit:$,noValidate:!0,children:[(0,i.jsxs)("div",{className:"mb-4",children:[" ",(0,i.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:" Name* "})," ",(0,i.jsx)("input",{type:"text",id:"name",name:"name",value:U.name,onChange:B,className:"w-full border ".concat(F.name?"border-red-500":"border-gray-300"," rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"),required:!0})," ",F.name&&(0,i.jsx)("p",{className:"mt-1 text-sm text-red-600",children:F.name})," "]}),(0,i.jsxs)("div",{className:"mb-4",children:[" ",(0,i.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:" Description* "})," ",(0,i.jsx)("textarea",{id:"description",name:"description",value:U.description,onChange:B,rows:3,className:"w-full border ".concat(F.description?"border-red-500":"border-gray-300"," rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"),required:!0})," ",F.description&&(0,i.jsx)("p",{className:"mt-1 text-sm text-red-600",children:F.description})," "]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4",children:[(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:" Price (₹)* "})," ",(0,i.jsx)("input",{type:"number",id:"price",name:"price",value:U.price,onChange:B,min:"0",step:"0.01",className:"w-full border ".concat(F.price?"border-red-500":"border-gray-300"," rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"),required:!0})," ",F.price&&(0,i.jsx)("p",{className:"mt-1 text-sm text-red-600",children:F.price})," "]}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-1",children:" Service Type* "})," ",(0,i.jsxs)("select",{id:"type",name:"type",value:U.type,onChange:B,required:!0,className:"w-full border ".concat(F.type?"border-red-500":"border-gray-300"," rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500 bg-white"),children:[" ",(0,i.jsx)("option",{value:"activity",children:"Activity"})," ",(0,i.jsx)("option",{value:"accommodation",children:"Accommodation"})," ",(0,i.jsx)("option",{value:"transport",children:"Transport"})," ",(0,i.jsx)("option",{value:"tour",children:"Tour Package"})," ",(0,i.jsx)("option",{value:"other",children:"Other"})," "]})," ",F.type&&(0,i.jsx)("p",{className:"mt-1 text-sm text-red-600",children:F.type})," "]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"island_id",className:"block text-sm font-medium text-gray-700 mb-1",children:" Island* "}),(0,i.jsxs)("select",{id:"island_id",name:"island_id",value:U.island_id,onChange:B,required:!0,disabled:S,className:"w-full border ".concat(F.island_id?"border-red-500":"border-gray-300"," rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500 bg-white disabled:bg-gray-100"),children:[(0,i.jsx)("option",{value:"",children:S?"Loading islands...":"Select Island"}),j&&j.map(e=>(0,i.jsx)("option",{value:e.id.toString(),children:e.name},e.id))]}),F.island_id&&(0,i.jsx)("p",{className:"mt-1 text-sm text-red-600",children:F.island_id}),N&&!S&&(0,i.jsxs)("p",{className:"mt-1 text-sm text-red-600",children:["Error loading islands: ",N.message]})]}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("label",{htmlFor:"image_url",className:"block text-sm font-medium text-gray-700 mb-1",children:" Image URL "})," ",(0,i.jsx)("input",{type:"url",id:"image_url",name:"image_url",value:U.image_url,onChange:B,placeholder:"https://...",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})," "]})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[" Availability* ",(0,i.jsx)("span",{className:"text-xs text-gray-500",children:"(Select available time slots)"})," "]}),F.availability&&(0,i.jsx)("p",{className:"mb-2 text-sm text-red-600",children:F.availability}),(0,i.jsxs)("div",{className:"border border-gray-300 rounded-md overflow-hidden",children:[" ",(0,i.jsxs)("div",{className:"overflow-x-auto",children:[" ",(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[" ",(0,i.jsxs)("thead",{className:"bg-gray-50",children:[" ",(0,i.jsxs)("tr",{children:[" ",(0,i.jsx)("th",{className:"px-2 py-2 text-left font-medium text-gray-500 uppercase sticky left-0 bg-gray-50 z-10",children:" Day "})," ",et.map(e=>(0,i.jsxs)("th",{className:"px-1 py-2 text-center font-medium text-gray-500 uppercase whitespace-nowrap",children:[" ",e.replace(" AM","a").replace(" PM","p")," "]},e))," "]})," "]})," ",(0,i.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[" ",["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(e=>(0,i.jsxs)("tr",{children:[" ",(0,i.jsxs)("td",{className:"px-2 py-2 whitespace-nowrap font-medium text-gray-900 sticky left-0 bg-white z-10",children:[" ",e," "]})," ",et.map(s=>(0,i.jsxs)("td",{className:"px-1 py-2 whitespace-nowrap text-center",children:[" ",(0,i.jsx)("input",{type:"checkbox",checked:G(e,s),onChange:t=>Y(e,s,t.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})," "]},"".concat(e,"-").concat(s)))," "]},e))," "]})," "]})," "]})," "]})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[" ",(0,i.jsx)("button",{type:"button",onClick:()=>{L(!1),A(null),E({})},className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-md text-sm",children:" Cancel "})," ",(0,i.jsxs)("button",{type:"submit",disabled:K,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm disabled:opacity-50 flex items-center",children:[" ",K&&(0,i.jsx)(n.Z,{className:"animate-spin h-4 w-4 mr-2"})," ",K?"Saving...":k?"Update Service":"Add Service"," "]})," "]})]})})]}):(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsx)("button",{onClick:()=>{_({name:"",description:"",price:"",image_url:"",availability:[],type:"activity",island_id:""}),A(null),L(!0),E({}),W(""),C()},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm",children:" + Add New Service "})}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,i.jsxs)("div",{className:"px-6 py-4 border-b bg-gray-50",children:[" ",(0,i.jsx)("h2",{className:"font-semibold",children:"Your Services"})," "]}),v?(0,i.jsx)(g,{text:"Loading your services..."}):0!==e.length||f?!v&&e.length>0?(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:" Service "}),(0,i.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:" Price "}),(0,i.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:" Status "}),(0,i.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:" Bookings "}),(0,i.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:" Actions "})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{var s;return(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"h-10 w-10 bg-gray-100 rounded-md flex-shrink-0 mr-3 flex items-center justify-center",children:e.image_url?(0,i.jsx)(l.default,{src:e.image_url,alt:e.name,width:40,height:40,className:"object-cover rounded-md",onError:e=>{e.target.style.display="none"}}):(0,i.jsx)(c.Z,{size:20,className:"text-gray-400"})}),(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})," ",(0,i.jsx)("div",{className:"text-xs text-gray-500 truncate max-w-xs",children:e.description||"No description"})," "]})]})}),(0,i.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:[" ","number"==typeof e.price?"₹".concat(e.price.toLocaleString("en-IN")):e.price," "]}),(0,i.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap",children:[" ",(0,i.jsxs)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(b(e.isActive)),children:[" ",e.isActive?"Active":"Inactive"," "]})," "]}),(0,i.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:[" ",null!==(s=e.bookings)&&void 0!==s?s:"N/A"," "]}),(0,i.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap text-right text-sm font-medium space-x-3",children:[(0,i.jsx)("button",{onClick:()=>Q(e),className:"text-blue-600 hover:text-blue-900 disabled:opacity-50",title:"Edit",disabled:"loading"===O||"loading"===z,children:(0,i.jsx)(d,{size:16})}),(0,i.jsx)("button",{onClick:()=>es(e.id,e.isActive),className:"".concat(e.isActive?"text-yellow-600 hover:text-yellow-900":"text-green-600 hover:text-green-900"," disabled:opacity-50"),title:e.isActive?"Deactivate":"Activate",disabled:"loading"===O||"loading"===z,children:"loading"===z&&(null==k?void 0:k.id)===e.id?(0,i.jsx)(n.Z,{className:"animate-spin h-4 w-4"}):e.isActive?(0,i.jsx)(u,{size:16}):(0,i.jsx)(m,{size:16})}),(0,i.jsx)("button",{onClick:()=>ee(e.id),className:"text-red-600 hover:text-red-900 disabled:opacity-50",title:"Delete",disabled:"loading"===O||"loading"===z,children:"loading"===O&&(null==k?void 0:k.id)===e.id?(0,i.jsx)(n.Z,{className:"animate-spin h-4 w-4"}):(0,i.jsx)(p,{size:16})})]})]},e.id)})})]})}):null:(0,i.jsx)("div",{className:"p-8 text-center text-gray-500",children:" You haven't added any services yet. "})]}),(0,i.jsxs)("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[" ",(0,i.jsx)("h3",{className:"text-lg font-medium text-blue-800 mb-4",children:"Service Management Tips"})," ",(0,i.jsxs)("ul",{className:"space-y-2 text-sm text-blue-700 list-disc list-inside",children:[" ",(0,i.jsx)("li",{children:"Keep descriptions clear and accurate."})," ",(0,i.jsx)("li",{children:"Ensure availability is up-to-date to avoid conflicts."})," ",(0,i.jsx)("li",{children:"Upload high-quality images to attract customers."})," ",(0,i.jsx)("li",{children:"Respond promptly to booking inquiries."})," "]})," "]})]})})}},9889:function(e,s,t){"use strict";t.d(s,{i:function(){return a},q:function(){return r}});var i=t(2265);function a(e,s){console.log("[useFetch] Hook initialized/re-rendered. URL:",e);let[t,a]=(0,i.useState)(null),[r,l]=(0,i.useState)(null),[n,c]=(0,i.useState)("idle"),o=JSON.stringify(s);return(0,i.useEffect)(()=>{console.log("[useFetch] useEffect triggered. URL:",e),(async()=>{if(console.log("[useFetch] fetchData started. URL:",e),!e){console.log("[useFetch] URL is null, setting status to idle."),c("idle"),a(null),l(null);return}console.log("[useFetch] Resetting state and setting status to loading."),c("loading"),a(null),l(null);try{let s;let t=JSON.parse(o||"{}");console.log("[useFetch] Attempting fetch. URL:",e,"Options:",t);let i=await fetch(e,{...t,credentials:"include"});console.log("[useFetch] Fetch completed. URL:",e,"Status:",i.status);try{console.log("[useFetch] Attempting response.json(). URL:",e),s=await i.json(),console.log("[useFetch] response.json() successful. URL:",e,"Result:",s)}catch(s){throw console.error("[useFetch] response.json() FAILED. URL:",e,"Error:",s),Error("Request failed with status ".concat(i.status," and non-JSON response."))}if(!i.ok){let t=(null==s?void 0:s.message)||i.statusText||"HTTP error! Status: ".concat(i.status);throw console.warn("[useFetch] Response not OK. Status:",i.status,"URL:",e,"Throwing error:",t),Error(t)}if(console.log("[useFetch] Response OK. Checking result.success. URL:",e),s.success)console.log("[useFetch] result.success is true. URL:",e),void 0!==s.data?(console.log("[useFetch] Setting data and status=success. URL:",e,"Data:",s.data),a(s.data),c("success")):(a(null),c("success"),console.warn("[useFetch] Fetch successful (result.success=true) but result.data is undefined. Setting data=null, status=success. URL: ".concat(e)));else{let t=s.message||"API returned success: false";throw console.warn("[useFetch] result.success is false. URL:",e,"Throwing error:",t),Error(t)}}catch(s){console.error("[useFetch] CATCH block error for URL ".concat(e,":"),s),console.log("[useFetch] Setting error state and status=error. URL:",e),l(s instanceof Error?s:Error("Unknown fetch error occurred")),c("error")}})()},[e,o]),console.log("[useFetch] Returning state. URL:",e,"Status:",n),{data:t,error:r,status:n,isLoading:"loading"===n}}function r(e){console.log("[useSubmit] Hook initialized/re-rendered. Initial URL:",e);let[s,t]=(0,i.useState)(null),[a,r]=(0,i.useState)(null),[l,n]=(0,i.useState)("idle"),c=async function(s){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",a=arguments.length>2?arguments[2]:void 0,l=a||e;if(console.log("[useSubmit] submit function called. Target URL:",l,"Method:",i),console.log("[useSubmit] Resetting state and setting status=loading."),n("loading"),t(null),r(null),!l)return console.error("[useSubmit] No URL provided (initial or override). Aborting submission."),r(Error("No URL specified for submission.")),n("error"),{success:!1,error:"No URL specified for submission."};try{let e;let a={method:i,headers:{"Content-Type":"application/json",Accept:"application/json"},body:"DELETE"!==i?JSON.stringify(s):void 0,credentials:"include"};console.log("[useSubmit] Attempting fetch. URL:",l,"Options:",a);let r=await fetch(l,a);console.log("[useSubmit] Fetch completed. URL:",l,"Status:",r.status);try{console.log("[useSubmit] Attempting response.json(). URL:",l),204===r.status||"0"===r.headers.get("content-length")?(console.log("[useSubmit] Received 204 No Content or empty body. Assuming success."),e={success:!0}):e=await r.json(),console.log("[useSubmit] response.json() successful or handled empty. URL:",l,"Result:",e)}catch(e){throw console.error("[useSubmit] response.json() FAILED. URL:",l,"Error:",e),Error("Request failed with status ".concat(r.status," and non-JSON response."))}if(console.log("[useSubmit] Checking response.ok and result.success. URL:",l),r.ok&&(void 0===e.success||!0===e.success)){if(console.log("[useSubmit] Response OK and result.success is true/undefined. URL:",l),void 0!==e.data)return console.log("[useSubmit] Setting data and status=success. URL:",l,"Data:",e.data),t(e.data),n("success"),{success:!0,data:e.data};return t(null),n("success"),console.warn("[useSubmit] Submit successful (result.success=true/undefined) but result.data is undefined. Setting data=null, status=success. URL: ".concat(l)),{success:!0,data:null}}{let s=e.message||"API Error: Status ".concat(r.status,", Success Flag: ").concat(e.success);throw console.warn("[useSubmit] Response NOT OK or result.success is false. URL:",l,"Throwing error:",s),Error(s)}}catch(s){console.error("[useSubmit] CATCH block error. URL:",l,"Error:",s);let e=s instanceof Error?s.message:"Unknown submit error occurred";return console.log("[useSubmit] Setting error state and status=error. URL:",l),r(Error(e)),n("error"),{success:!1,error:e}}};return console.log("[useSubmit] Returning state. Initial URL:",e,"Status:",l),{submit:c,data:s,error:a,status:l,isLoading:"loading"===l,reset:()=>{console.log("[useSubmit] reset function called."),t(null),r(null),n("idle")}}}}},function(e){e.O(0,[1451,3145,2971,2117,1744],function(){return e(e.s=418)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4971],{1157:function(e,s,l){Promise.resolve().then(l.bind(l,9542))},3639:function(e,s,l){"use strict";l.d(s,{Z:function(){return a}});let a=(0,l(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},9542:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return _},dynamic:function(){return x}});var a=l(7437),i=l(2265),t=l(9376),r=l(4603),n=l(9889),o=l(3340),d=l(5863),c=l(3639),m=l(7648),u=l(3500);let x="force-dynamic",h=[{label:"Wi-Fi",value:"wifi"},{label:"Swimming Pool",value:"pool"},{label:"Restaurant",value:"restaurant"},{label:"Bar/Lounge",value:"bar"},{label:"Gym/Fitness Center",value:"gym"},{label:"Spa",value:"spa"},{label:"Parking",value:"parking"},{label:"Room Service",value:"room_service"},{label:"Air Conditioning",value:"ac"},{label:"Laundry Service",value:"laundry"},{label:"Business Center",value:"business_center"},{label:"Airport Shuttle",value:"shuttle"}],g=[{label:"Breakfast Included (CP)",value:"cp"},{label:"Breakfast & Dinner (MAP)",value:"map"},{label:"All Meals (AP)",value:"ap"},{label:"Room Only (EP)",value:"ep"},{label:"All Inclusive (AI)",value:"ai"}],p=e=>{let{text:s="Loading..."}=e;return(0,a.jsxs)("div",{className:"flex justify-center items-center py-10",children:[(0,a.jsx)(d.Z,{className:"h-6 w-6 animate-spin text-blue-600 mr-2"}),(0,a.jsx)("span",{children:s})]})},b=()=>(0,a.jsxs)("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-md shadow-md max-w-2xl mx-auto my-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5 mr-3"}),(0,a.jsx)("h3",{className:"font-semibold",children:"Verification Pending"})]}),(0,a.jsx)("p",{className:"mt-2 text-sm",children:"Your vendor profile is awaiting verification. You cannot add services until verified."})]}),f=()=>(0,a.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md shadow-md max-w-2xl mx-auto my-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5 mr-3"}),(0,a.jsx)("h3",{className:"font-semibold",children:"Incorrect Vendor Type"})]}),(0,a.jsx)("p",{className:"mt-2 text-sm",children:"This section is for Hotel vendors only."})]}),y=e=>{let{label:s,name:l,value:t,onChange:r,placeholder:n,helperText:o}=e,[d,c]=(0,i.useState)(""),m=e=>{r(l,t.filter(s=>s!==e))};return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:l,className:"block text-sm font-medium text-gray-700 mb-1",children:s}),(0,a.jsxs)("div",{className:"mt-1 flex flex-wrap items-center gap-1 p-2 border border-gray-300 rounded-md shadow-sm bg-white",children:[t.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:[e,(0,a.jsxs)("button",{type:"button",onClick:()=>m(e),className:"ml-1.5 flex-shrink-0 text-indigo-500 hover:text-indigo-700 focus:outline-none",children:[(0,a.jsxs)("span",{className:"sr-only",children:["Remove ",e]}),"\xd7"]})]},e)),(0,a.jsx)("input",{type:"text",id:l,value:d,onChange:e=>c(e.target.value),onKeyDown:e=>{if(","===e.key||"Enter"===e.key){e.preventDefault();let s=d.trim();s&&!t.includes(s)&&r(l,[...t,s]),c("")}},placeholder:n||"Add item and press Enter or comma",className:"flex-grow px-1 py-0.5 border-none focus:ring-0 sm:text-sm outline-none"})]}),o&&(0,a.jsx)("p",{className:"mt-1.5 text-xs text-gray-500",children:o})]})};function j(){let e=(0,t.useRouter)(),{user:s,isLoading:l,isAuthenticated:c}=(0,r.a)(),[x,j]=(0,i.useState)({name:"",description:"",price:"",cancellation_policy:"",images:[],island_id:"",is_active:!0,star_rating:"",check_in_time:"14:00",check_out_time:"12:00",total_rooms:"",facilities:[],meal_plans:[],pets_allowed:!1,children_allowed:!0,accessibility_features:"",street_address:"",geo_lat:"",geo_lng:""}),[_,v]=(0,i.useState)(!1),N=(null==s?void 0:s.id)?"/api/vendors/profile?userId=".concat(s.id):null,{data:w,error:k,status:C}=(0,n.i)(N),F=(null==w?void 0:w.verified)===1,A=(null==w?void 0:w.type)==="hotel",{data:S=[],error:P,status:I}=(0,n.i)("/api/islands");(0,i.useEffect)(()=>{l||c&&(null==s?void 0:s.role_id)===3||e.replace("/auth/signin?reason=unauthorized_vendor")},[l,c,s,e]);let E=l||"loading"===C||"loading"===I;if(E)return(0,a.jsx)(p,{text:"Loading Add Hotel Form..."});if("error"===C||"success"===C&&!w)return(0,a.jsx)("div",{className:"text-red-600",children:"Error loading vendor profile or profile not found."});if(!F)return(0,a.jsx)(b,{});if(!A)return(0,a.jsx)(f,{});let R=e=>{let{name:s,value:l,type:a}=e.target;if("checkbox"===a){let{checked:l}=e.target;j(e=>({...e,[s]:l}))}else j(e=>({...e,[s]:l}))},L=(e,s)=>{j(l=>({...l,[e]:s}))},H=async s=>{if(s.preventDefault(),v(!0),!x.island_id||!x.star_rating||!x.name.trim()||isNaN(parseFloat(x.price))||0>=parseFloat(x.price)||isNaN(parseInt(x.total_rooms,10))||0>=parseInt(x.total_rooms,10)){(0,o.Am)({variant:"destructive",title:"Validation Error",description:"Please fill all required fields (*) with valid data."}),v(!1);return}try{let s={service_provider_id:null==w?void 0:w.id,name:x.name,description:x.description,island_id:parseInt(x.island_id,10)||null,is_active:x.is_active,star_rating:parseInt(x.star_rating,10)||null,check_in_time:x.check_in_time||null,check_out_time:x.check_out_time||null,price_base:parseFloat(x.price)||0,total_rooms:parseInt(x.total_rooms,10)||null,pets_allowed:x.pets_allowed,children_allowed:x.children_allowed,accessibility_features:x.accessibility_features,street_address:x.street_address,geo_lat:x.geo_lat?parseFloat(x.geo_lat):null,geo_lng:x.geo_lng?parseFloat(x.geo_lng):null,cancellation_policy:x.cancellation_policy,images:JSON.stringify(x.images),facilities:JSON.stringify(x.facilities),meal_plans:JSON.stringify(x.meal_plans)},l=await fetch("/api/vendor/hotels",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),a=await l.json();if(l.ok&&a.success)(0,o.Am)({title:"Success",description:"Hotel added successfully."}),e.push("/hotels");else throw Error(a.message||"Failed to add hotel")}catch(e){console.error("Add Hotel Error:",e),(0,o.Am)({variant:"destructive",title:"Error",description:e.message||"An unexpected error occurred."})}finally{v(!1)}};return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-4xl mx-auto",children:[(0,a.jsx)("nav",{className:"mb-6 text-sm text-gray-500","aria-label":"Breadcrumb",children:(0,a.jsxs)("ol",{className:"list-none p-0 inline-flex space-x-2",children:[(0,a.jsx)("li",{className:"flex items-center",children:(0,a.jsx)(m.default,{href:"/dashboard",className:"hover:text-indigo-600 hover:underline",children:"Dashboard"})}),(0,a.jsx)("li",{children:(0,a.jsx)("span",{className:"text-gray-400",children:"/"})}),(0,a.jsx)("li",{className:"flex items-center",children:(0,a.jsx)(m.default,{href:"/hotels",className:"hover:text-indigo-600 hover:underline",children:"Hotels"})}),(0,a.jsx)("li",{children:(0,a.jsx)("span",{className:"text-gray-400",children:"/"})}),(0,a.jsx)("li",{className:"flex items-center text-gray-700 font-medium",children:"Add New Hotel"})]})}),(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Add New Hotel"}),(0,a.jsxs)("form",{onSubmit:H,className:"space-y-8",children:[(0,a.jsxs)("fieldset",{className:"border border-gray-200 p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("legend",{className:"text-lg font-semibold text-gray-700 px-2",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Hotel Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",id:"name",name:"name",value:x.name,onChange:R,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"island_id",className:"block text-sm font-medium text-gray-700 mb-1",children:["Island ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{id:"island_id",name:"island_id",value:x.island_id,onChange:R,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white",children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"-- Select Island --"}),null==S?void 0:S.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),"error"===I&&(0,a.jsxs)("p",{className:"text-xs text-red-500 mt-1",children:["Error loading islands: ",null==P?void 0:P.message]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"star_rating",className:"block text-sm font-medium text-gray-700 mb-1",children:["Star Rating ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{id:"star_rating",name:"star_rating",value:x.star_rating,onChange:R,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm bg-white",children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"-- Select Rating --"}),(0,a.jsx)("option",{value:"1",children:"1 Star"}),(0,a.jsx)("option",{value:"2",children:"2 Stars"}),(0,a.jsx)("option",{value:"3",children:"3 Stars"}),(0,a.jsx)("option",{value:"4",children:"4 Stars"}),(0,a.jsx)("option",{value:"5",children:"5 Stars"})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{id:"description",name:"description",value:x.description,onChange:R,rows:3,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:["Base Price per Night (INR) ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"number",id:"price",name:"price",value:x.price,onChange:R,required:!0,min:"0",step:"0.01",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 3500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"total_rooms",className:"block text-sm font-medium text-gray-700 mb-1",children:["Total Rooms ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"number",id:"total_rooms",name:"total_rooms",value:x.total_rooms,onChange:R,required:!0,min:"1",step:"1",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 50"})]})]})]}),(0,a.jsxs)("fieldset",{className:"border border-gray-200 p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("legend",{className:"text-lg font-semibold text-gray-700 px-2",children:"Check-in/out & Policies"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"check_in_time",className:"block text-sm font-medium text-gray-700 mb-1",children:"Check-in Time"}),(0,a.jsx)("input",{type:"time",id:"check_in_time",name:"check_in_time",value:x.check_in_time,onChange:R,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"check_out_time",className:"block text-sm font-medium text-gray-700 mb-1",children:"Check-out Time"}),(0,a.jsx)("input",{type:"time",id:"check_out_time",name:"check_out_time",value:x.check_out_time,onChange:R,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"pets_allowed",name:"pets_allowed",checked:x.pets_allowed,onChange:R,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,a.jsx)("label",{htmlFor:"pets_allowed",className:"ml-2 block text-sm text-gray-900",children:"Pets Allowed"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"children_allowed",name:"children_allowed",checked:x.children_allowed,onChange:R,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,a.jsx)("label",{htmlFor:"children_allowed",className:"ml-2 block text-sm text-gray-900",children:"Children Allowed"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{htmlFor:"cancellation_policy",className:"block text-sm font-medium text-gray-700 mb-1",children:"Cancellation Policy"}),(0,a.jsx)("textarea",{id:"cancellation_policy",name:"cancellation_policy",value:x.cancellation_policy,onChange:R,rows:2,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., Full refund if cancelled 48 hours prior..."})]})]})]}),(0,a.jsxs)("fieldset",{className:"border border-gray-200 p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("legend",{className:"text-lg font-semibold text-gray-700 px-2",children:"Facilities & Meal Plans"}),(0,a.jsxs)("div",{className:"space-y-6 mt-4",children:[(0,a.jsx)(u.c,{label:"Facilities",name:"facilities",options:h,selectedValues:x.facilities,onChange:L,gridCols:3,helperText:"Select facilities available at the hotel."}),(0,a.jsx)(u.c,{label:"Meal Plans Offered",name:"meal_plans",options:g,selectedValues:x.meal_plans,onChange:L,gridCols:3,helperText:"Select meal plans available for booking."})]})]}),(0,a.jsxs)("fieldset",{className:"border border-gray-200 p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("legend",{className:"text-lg font-semibold text-gray-700 px-2",children:"Location & Accessibility"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{htmlFor:"street_address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address"}),(0,a.jsx)("input",{type:"text",id:"street_address",name:"street_address",value:x.street_address,onChange:R,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"geo_lat",className:"block text-sm font-medium text-gray-700 mb-1",children:"Latitude"}),(0,a.jsx)("input",{type:"number",id:"geo_lat",name:"geo_lat",value:x.geo_lat,onChange:R,step:"any",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 11.9138"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"geo_lng",className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitude"}),(0,a.jsx)("input",{type:"number",id:"geo_lng",name:"geo_lng",value:x.geo_lng,onChange:R,step:"any",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., 79.8145"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{htmlFor:"accessibility_features",className:"block text-sm font-medium text-gray-700 mb-1",children:"Accessibility Features"}),(0,a.jsx)("input",{type:"text",id:"accessibility_features",name:"accessibility_features",value:x.accessibility_features,onChange:R,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., Wheelchair accessible, Ramp access"})]})]})]}),(0,a.jsxs)("fieldset",{className:"border border-gray-200 p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("legend",{className:"text-lg font-semibold text-gray-700 px-2",children:"Images"}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(y,{label:"Image URLs",name:"images",value:x.images,onChange:L,placeholder:"Enter image URL and press Enter",helperText:"Add URLs for photos showcasing the hotel."})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,a.jsx)(m.default,{href:"/hotels",className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-300 transition duration-150 ease-in-out",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:!!(_||E),className:"inline-flex items-center bg-indigo-600 text-white px-6 py-2 rounded-md text-sm font-medium hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition duration-150 ease-in-out",children:_?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{size:16,className:"animate-spin mr-2"})," Adding Hotel..."]}):"Add Hotel"})]})]})]})}function _(){return(0,a.jsx)(i.Suspense,{fallback:(0,a.jsx)(p,{text:"Loading Add Hotel Page..."}),children:(0,a.jsx)(j,{})})}}},function(e){e.O(0,[1451,8666,2971,2117,1744],function(){return e(e.s=1157)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7904],{7006:function(e,s,t){Promise.resolve().then(t.bind(t,7133))},3639:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3245:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(9763).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},5863:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3774:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9376:function(e,s,t){"use strict";var n=t(5475);t.o(n,"useParams")&&t.d(s,{useParams:function(){return n.useParams}}),t.o(n,"usePathname")&&t.d(s,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(s,{useRouter:function(){return n.useRouter}}),t.o(n,"useSearchParams")&&t.d(s,{useSearchParams:function(){return n.useSearchParams}})},7133:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var n=t(7437),l=t(2265),a=t(9376),r=t(3145),c=t(7648),i=t(5863),o=t(3639),u=t(3774),d=t(3245),h=t(9889);let m=()=>(0,n.jsxs)("div",{className:"min-h-screen flex items-center justify-center",children:[(0,n.jsx)(i.Z,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,n.jsx)("span",{className:"ml-2",children:"Loading destination..."})]});function g(){var e,s;let t=(0,a.useParams)().id,{data:l,error:i,status:g}=(0,h.i)(t?"/api/destinations/".concat(t):null),x=(null==l?void 0:null===(s=l.images)||void 0===s?void 0:null===(e=s.split(",")[0])||void 0===e?void 0:e.trim())||"/images/placeholder.jpg",f=[];if(null==l?void 0:l.attractions)try{f=JSON.parse(l.attractions)}catch(e){f=l.attractions.split(",").map(e=>e.trim()).filter(e=>e)}let p=[];if(null==l?void 0:l.activities)try{p=JSON.parse(l.activities)}catch(e){p=l.activities.split(",").map(e=>e.trim()).filter(e=>e)}let b=(null==l?void 0:l.bestTimeToVisit)||"October to May",j=(null==l?void 0:l.howToReach)||"Varies (Ferry/Flight)";return"loading"===g?(0,n.jsx)(m,{}):"error"===g?(0,n.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center text-center px-4 py-10",children:[(0,n.jsx)(o.Z,{className:"h-12 w-12 text-red-500 mb-4"}),(0,n.jsx)("h2",{className:"text-2xl font-semibold text-red-600 mb-4",children:"Error Loading Destination"}),(0,n.jsx)("p",{className:"text-gray-700 mb-6",children:(null==i?void 0:i.message)||"Could not fetch destination details."}),(0,n.jsx)(c.default,{href:"/destinations",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Back to Destinations"})]}):"success"!==g||l?l?(0,n.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,n.jsxs)("div",{className:"relative h-[50vh] w-full",children:[(0,n.jsx)(r.default,{src:x,alt:l.name,fill:!0,style:{objectFit:"cover"},priority:!0,onError:e=>e.currentTarget.src="/images/placeholder.jpg"}),(0,n.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:[" ",(0,n.jsx)("h1",{className:"text-4xl md:text-6xl font-bold text-white text-center px-4",children:l.name})," "]})]}),(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[(0,n.jsxs)("h2",{className:"text-2xl font-bold mb-4",children:["About ",l.name]}),(0,n.jsxs)("p",{className:"text-gray-700 mb-6 whitespace-pre-line",children:[" ",l.description||"No detailed description available."," "]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[f.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Highlights / Attractions"}),(0,n.jsx)("ul",{className:"list-disc pl-5 space-y-1",children:f.map((e,s)=>(0,n.jsx)("li",{className:"text-gray-700",children:e},"att-".concat(s)))})]}),p.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Popular Activities"}),(0,n.jsx)("ul",{className:"list-disc pl-5 space-y-1",children:p.map((e,s)=>(0,n.jsx)("li",{className:"text-gray-700",children:e},"act-".concat(s)))})]})]}),1===l.permit_required&&(0,n.jsxs)("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400",children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold text-yellow-800 mb-1",children:[" ",(0,n.jsx)(d.Z,{size:18,className:"inline mr-1 mb-0.5"})," Permit Required"]}),(0,n.jsxs)("p",{className:"text-yellow-700 text-sm",children:[" ",l.permit_details||"A permit is required to visit this area. Please arrange in advance."," "]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[" ",(0,n.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Best Time to Visit"})," ",(0,n.jsx)("p",{className:"text-gray-700",children:b})," "]}),(0,n.jsxs)("div",{children:[" ",(0,n.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"How to Reach"})," ",(0,n.jsx)("p",{className:"text-gray-700",children:j})," "]})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,n.jsxs)("h2",{className:"text-2xl font-bold mb-4",children:["Packages Including ",l.name]}),(0,n.jsxs)("p",{className:"text-gray-700 mb-4",children:["Explore our curated packages that feature visits to ",l.name,"."]}),(0,n.jsxs)("div",{className:"mt-4",children:[" ",(0,n.jsx)(c.default,{href:"/packages?destination=".concat(t),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 inline-block",children:" View Related Packages "})," "]})]})]})]}):(0,n.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center text-center px-4 py-10",children:[(0,n.jsx)(o.Z,{className:"h-12 w-12 text-orange-500 mb-4"}),(0,n.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Data Error"}),(0,n.jsx)("p",{className:"text-gray-600 mb-6",children:"Could not display booking details. Please try refreshing."}),(0,n.jsx)(c.default,{href:"/destinations",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Back to Destinations"})]}):(0,n.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center text-center px-4 py-10",children:[(0,n.jsx)(u.Z,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,n.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Destination Not Found"}),(0,n.jsxs)("p",{className:"text-gray-600 mb-6",children:["The destination you are looking for (ID: ",t,") does not exist or is unavailable."]}),(0,n.jsx)(c.default,{href:"/destinations",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Back to Destinations"})]})}function x(){return(0,n.jsx)(l.Suspense,{fallback:(0,n.jsx)(m,{}),children:(0,n.jsx)(g,{})})}},9889:function(e,s,t){"use strict";t.d(s,{i:function(){return l},q:function(){return a}});var n=t(2265);function l(e,s){console.log("[useFetch] Hook initialized/re-rendered. URL:",e);let[t,l]=(0,n.useState)(null),[a,r]=(0,n.useState)(null),[c,i]=(0,n.useState)("idle"),o=JSON.stringify(s);return(0,n.useEffect)(()=>{console.log("[useFetch] useEffect triggered. URL:",e),(async()=>{if(console.log("[useFetch] fetchData started. URL:",e),!e){console.log("[useFetch] URL is null, setting status to idle."),i("idle"),l(null),r(null);return}console.log("[useFetch] Resetting state and setting status to loading."),i("loading"),l(null),r(null);try{let s;let t=JSON.parse(o||"{}");console.log("[useFetch] Attempting fetch. URL:",e,"Options:",t);let n=await fetch(e,{...t,credentials:"include"});console.log("[useFetch] Fetch completed. URL:",e,"Status:",n.status);try{console.log("[useFetch] Attempting response.json(). URL:",e),s=await n.json(),console.log("[useFetch] response.json() successful. URL:",e,"Result:",s)}catch(s){throw console.error("[useFetch] response.json() FAILED. URL:",e,"Error:",s),Error("Request failed with status ".concat(n.status," and non-JSON response."))}if(!n.ok){let t=(null==s?void 0:s.message)||n.statusText||"HTTP error! Status: ".concat(n.status);throw console.warn("[useFetch] Response not OK. Status:",n.status,"URL:",e,"Throwing error:",t),Error(t)}if(console.log("[useFetch] Response OK. Checking result.success. URL:",e),s.success)console.log("[useFetch] result.success is true. URL:",e),void 0!==s.data?(console.log("[useFetch] Setting data and status=success. URL:",e,"Data:",s.data),l(s.data),i("success")):(l(null),i("success"),console.warn("[useFetch] Fetch successful (result.success=true) but result.data is undefined. Setting data=null, status=success. URL: ".concat(e)));else{let t=s.message||"API returned success: false";throw console.warn("[useFetch] result.success is false. URL:",e,"Throwing error:",t),Error(t)}}catch(s){console.error("[useFetch] CATCH block error for URL ".concat(e,":"),s),console.log("[useFetch] Setting error state and status=error. URL:",e),r(s instanceof Error?s:Error("Unknown fetch error occurred")),i("error")}})()},[e,o]),console.log("[useFetch] Returning state. URL:",e,"Status:",c),{data:t,error:a,status:c,isLoading:"loading"===c}}function a(e){console.log("[useSubmit] Hook initialized/re-rendered. URL:",e);let[s,t]=(0,n.useState)(null),[l,a]=(0,n.useState)(null),[r,c]=(0,n.useState)("idle"),i=async function(s){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST";console.log("[useSubmit] submit function called. URL:",e,"Method:",n),console.log("[useSubmit] Resetting state and setting status=loading."),c("loading"),t(null),a(null);try{let l;let a={method:n,headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(s),credentials:"include"};console.log("[useSubmit] Attempting fetch. URL:",e,"Options:",a);let r=await fetch(e,a);console.log("[useSubmit] Fetch completed. URL:",e,"Status:",r.status);try{console.log("[useSubmit] Attempting response.json(). URL:",e),l=await r.json(),console.log("[useSubmit] response.json() successful. URL:",e,"Result:",l)}catch(s){throw console.error("[useSubmit] response.json() FAILED. URL:",e,"Error:",s),Error("Request failed with status ".concat(r.status," and non-JSON response."))}if(console.log("[useSubmit] Checking response.ok and result.success. URL:",e),r.ok&&l.success){if(console.log("[useSubmit] Response OK and result.success is true. URL:",e),void 0!==l.data)return console.log("[useSubmit] Setting data and status=success. URL:",e,"Data:",l.data),t(l.data),c("success"),{success:!0,data:l.data};return t(null),c("success"),console.warn("[useSubmit] Submit successful (result.success=true) but result.data is undefined. Setting data=null, status=success. URL: ".concat(e)),{success:!0,data:null}}{let s=l.message||"API Error: Status ".concat(r.status,", Success Flag: ").concat(l.success);throw console.warn("[useSubmit] Response NOT OK or result.success is false. URL:",e,"Throwing error:",s),Error(s)}}catch(t){console.error("[useSubmit] CATCH block error. URL:",e,"Error:",t);let s=t instanceof Error?t.message:"Unknown submit error occurred";return console.log("[useSubmit] Setting error state and status=error. URL:",e),a(Error(s)),c("error"),{success:!1,error:s}}};return console.log("[useSubmit] Returning state. URL:",e,"Status:",r),{submit:i,data:s,error:l,status:r,isLoading:"loading"===r,reset:()=>{console.log("[useSubmit] reset function called."),t(null),a(null),c("idle")}}}}},function(e){e.O(0,[3847,7648,2971,2117,1744],function(){return e(e.s=7006)}),_N_E=e.O()}]);
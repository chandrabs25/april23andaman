(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9604],{182:function(e,s,t){Promise.resolve().then(t.bind(t,244))},3639:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5863:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3247:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9376:function(e,s,t){"use strict";var r=t(5475);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},244:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f},dynamic:function(){return m}});var r=t(7437),a=t(2265),l=t(9376),n=t(7648),o=t(3145),c=t(5863),i=t(3247),u=t(3639),d=t(9889);let m="force-dynamic",h=()=>(0,r.jsxs)("div",{className:"flex justify-center items-center py-20",children:[(0,r.jsx)(c.Z,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,r.jsx)("span",{className:"ml-2 text-lg",children:"Loading search results..."})]}),g=e=>{let{results:s}=e;if(!(s.destinations.length>0||s.packages.length>0||s.activities.length>0))return null;let t=e=>e.image_url||"/images/placeholder.jpg";return(0,r.jsxs)("div",{className:"space-y-12",children:[s.destinations.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Destinations"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.destinations.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden flex flex-col",children:[(0,r.jsxs)("div",{className:"h-48 relative",children:[" ",(0,r.jsx)(o.default,{src:t(e),alt:e.name,fill:!0,className:"object-cover",onError:e=>e.currentTarget.src="/images/placeholder.jpg"})," "]}),(0,r.jsxs)("div",{className:"p-6 flex flex-col flex-grow",children:[" ",(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2",children:e.name})," ",(0,r.jsx)("p",{className:"text-gray-600 mb-2 text-sm",children:e.location||"Andaman Islands"})," ",(0,r.jsx)("p",{className:"text-gray-700 mb-4 line-clamp-3 flex-grow",children:e.description||"Discover this location."})," ",(0,r.jsx)(n.default,{href:"/destinations/".concat(e.id),className:"inline-block self-start mt-auto bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors text-sm",children:" Explore "})," "]})]},"dest-".concat(e.id)))})]}),s.packages.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Travel Packages"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.packages.map(e=>{var s;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden flex flex-col",children:[(0,r.jsxs)("div",{className:"h-48 relative",children:[" ",(0,r.jsx)(o.default,{src:t(e),alt:e.name,fill:!0,className:"object-cover",onError:e=>e.currentTarget.src="/images/placeholder.jpg"})," "]}),(0,r.jsxs)("div",{className:"p-6 flex flex-col flex-grow",children:[" ",(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2",children:e.name})," ",(0,r.jsx)("p",{className:"text-gray-600 mb-2 text-sm",children:e.duration})," ",(0,r.jsx)("p",{className:"text-gray-700 mb-3 line-clamp-3 flex-grow",children:e.description||"Check out this package."})," ",(0,r.jsxs)("p",{className:"text-lg font-bold text-blue-600 mb-4",children:["₹",null===(s=e.price)||void 0===s?void 0:s.toLocaleString("en-IN")]})," ",(0,r.jsx)(n.default,{href:"/packages/".concat(e.id),className:"inline-block self-start mt-auto bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors text-sm",children:" View Details "})," "]})]},"pkg-".concat(e.id))})})]}),s.activities.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Activities"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.activities.map(e=>{var s;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden flex flex-col",children:[(0,r.jsxs)("div",{className:"h-48 relative",children:[" ",(0,r.jsx)(o.default,{src:t(e),alt:e.name,fill:!0,className:"object-cover",onError:e=>e.currentTarget.src="/images/placeholder.jpg"})," "]}),(0,r.jsxs)("div",{className:"p-6 flex flex-col flex-grow",children:[" ",(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2",children:e.name})," ",(0,r.jsx)("p",{className:"text-gray-600 mb-2 text-sm",children:e.duration||"Approx 2-3 hours"})," ",(0,r.jsxs)("p",{className:"text-gray-600 mb-2 text-sm",children:["Location: ",e.island_name||e.location||"Andaman"]})," ",(0,r.jsx)("p",{className:"text-gray-700 mb-3 line-clamp-3 flex-grow",children:e.description||"Enjoy this activity."})," ",(0,r.jsxs)("p",{className:"text-lg font-bold text-blue-600 mb-4",children:["₹",null===(s=e.price)||void 0===s?void 0:s.toLocaleString("en-IN")]})," ",(0,r.jsx)(n.default,{href:"/activities/".concat(e.id),className:"inline-block self-start mt-auto bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors text-sm",children:" Book Now "})," "]})]},"act-".concat(e.id))})})]})]})};function x(){let e=(0,l.useSearchParams)(),s=e.get("q")||"",t=e.get("destination")||"",a=e.get("startDate")||"",o=e.get("endDate")||"",c=e.get("travelers")||"",m=new URLSearchParams;s&&m.set("q",s),t&&m.set("destination",t),a&&m.set("startDate",a),o&&m.set("endDate",o),c&&m.set("travelers",c);let x="/api/search?".concat(m.toString()),{data:f,error:p,status:b}=(0,d.i)(x),j=(null==f?void 0:f.data)||{destinations:[],packages:[],activities:[]},v=j.destinations.length>0||j.packages.length>0||j.activities.length>0;return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8 min-h-[60vh]",children:[" ",(0,r.jsxs)("div",{className:"mb-8 p-4 bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-3",children:"Search Results"}),s||t||a||c?(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Filters:"}),s&&(0,r.jsxs)("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full flex items-center gap-1",children:[(0,r.jsx)(i.Z,{size:14}),' "',s,'"']}),t&&(0,r.jsxs)("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full",children:["Destination: ",t]}),a&&(0,r.jsxs)("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full",children:["Dates: ",a,o?" to ".concat(o):""]}),c&&(0,r.jsxs)("span",{className:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full",children:["Travelers: ",c]})]}):(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"Showing all results. Use the search bar on the homepage to refine."})]}),"loading"===b&&(0,r.jsx)(h,{}),"error"===b&&(0,r.jsxs)("div",{className:"text-center py-10 px-4 bg-red-50 border border-red-200 rounded-md",children:[(0,r.jsx)(u.Z,{className:"h-8 w-8 text-red-500 mx-auto mb-3"}),(0,r.jsx)("p",{className:"text-red-700 font-medium",children:"Search Failed"}),(0,r.jsx)("p",{className:"text-red-600 text-sm mt-1",children:(null==p?void 0:p.message)||"An unknown error occurred."}),(0,r.jsx)(n.default,{href:"/",className:"mt-4 inline-block text-blue-600 hover:underline",children:"Go back home"})]}),"success"===b&&!v&&(0,r.jsxs)("div",{className:"text-center py-16 bg-white rounded-lg shadow",children:[(0,r.jsx)(i.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"No results found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"We couldn't find anything matching your search. Try different keywords or filters."}),(0,r.jsx)(n.default,{href:"/",className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors",children:" Back to Home "})]}),"success"===b&&v&&(0,r.jsx)(g,{results:j})]})}function f(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)(h,{}),children:(0,r.jsx)(x,{})})}},9889:function(e,s,t){"use strict";t.d(s,{i:function(){return a},q:function(){return l}});var r=t(2265);function a(e,s){var t;console.log("[useFetch] Hook initialized/re-rendered. URL:",e);let[a,l]=(0,r.useState)({data:null,error:null,status:"idle"}),n=JSON.stringify(s);return(0,r.useEffect)(()=>{console.log("[useFetch] useEffect triggered. URL:",e),(async()=>{if(console.log("[useFetch] fetchData started. URL:",e),!e){console.log("[useFetch] URL is null, setting state to idle/null."),l({data:null,error:null,status:"idle"});return}console.log("[useFetch] Resetting state and setting status to loading."),l({data:null,error:null,status:"loading"});try{let s;let t=JSON.parse(n||"{}");console.log("[useFetch] Attempting fetch. URL:",e,"Options:",t);let r=await fetch(e,{...t,credentials:"include"});console.log("[useFetch] Fetch completed. URL:",e,"Status:",r.status);try{console.log("[useFetch] Attempting response.json(). URL:",e),s=await r.json(),console.log("[useFetch] response.json() successful. URL:",e,"Result:",s)}catch(s){throw console.error("[useFetch] response.json() FAILED. URL:",e,"Error:",s),Error("Request failed with status ".concat(r.status," and non-JSON response."))}if(!r.ok){let t=(null==s?void 0:s.message)||r.statusText||"HTTP error! Status: ".concat(r.status);throw console.warn("[useFetch] Response not OK. Status:",r.status,"URL:",e,"Throwing error:",t),Error(t)}if(console.log("[useFetch] Response OK. Checking result.success. URL:",e),s.success)console.log("[useFetch] result.success is true. URL:",e),void 0!==s.data?(console.log("[useFetch] Setting state data and status=success. URL:",e,"Data:",s.data),l({data:s.data,error:null,status:"success"})):(console.warn("[useFetch] Fetch successful (result.success=true) but result.data is undefined. Setting state data=null, status=success. URL: ".concat(e)),l({data:null,error:null,status:"success"}));else{let t=s.message||"API returned success: false";throw console.warn("[useFetch] result.success is false. URL:",e,"Throwing error:",t),Error(t)}}catch(t){console.error("[useFetch] CATCH block error for URL ".concat(e,":"),t);let s=t instanceof Error?t:Error("Unknown fetch error occurred");console.log("[useFetch] Setting state error and status=error. URL:",e),l({data:null,error:s,status:"error"})}})()},[e,n]),console.log("[useFetch] Returning combined state for URL:",e,{data:a.data,error:null===(t=a.error)||void 0===t?void 0:t.message,status:a.status}),{data:a.data,error:a.error,status:a.status,isLoading:"loading"===a.status}}function l(e){console.log("[useSubmit] Hook initialized/re-rendered. Initial URL:",e);let[s,t]=(0,r.useState)(null),[a,l]=(0,r.useState)(null),[n,o]=(0,r.useState)("idle"),c=async function(s){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",a=arguments.length>2?arguments[2]:void 0,n=a||e;if(console.log("[useSubmit] submit function called. Target URL:",n,"Method:",r),o("loading"),t(null),l(null),!n)return console.error("[useSubmit] No URL provided (initial or override). Aborting submission."),l(Error("No URL specified for submission.")),o("error"),{success:!1,error:"No URL specified for submission."};try{let e;let a={method:r,headers:{"Content-Type":"application/json",Accept:"application/json"},body:"DELETE"!==r?JSON.stringify(s):void 0,credentials:"include"};console.log("[useSubmit] Attempting fetch. URL:",n,"Options:",a);let l=await fetch(n,a);console.log("[useSubmit] Fetch completed. URL:",n,"Status:",l.status);try{console.log("[useSubmit] Attempting response.json(). URL:",n),204===l.status||"0"===l.headers.get("content-length")?(console.log("[useSubmit] Received 204 No Content or empty body. Assuming success."),e={success:!0}):e=await l.json(),console.log("[useSubmit] response.json() successful or handled empty. URL:",n,"Result:",e)}catch(e){throw console.error("[useSubmit] response.json() FAILED. URL:",n,"Error:",e),Error("Request failed with status ".concat(l.status," and non-JSON response."))}if(console.log("[useSubmit] Checking response.ok and result.success. URL:",n),l.ok&&(void 0===e.success||!0===e.success)){if(console.log("[useSubmit] Response OK and result.success is true/undefined. URL:",n),void 0!==e.data)return console.log("[useSubmit] Setting data and status=success. URL:",n,"Data:",e.data),t(e.data),o("success"),{success:!0,data:e.data};return t(null),o("success"),console.warn("[useSubmit] Submit successful (result.success=true/undefined) but result.data is undefined. Setting data=null, status=success. URL: ".concat(n)),{success:!0,data:null}}{let s=e.message||"API Error: Status ".concat(l.status,", Success Flag: ").concat(e.success);throw console.warn("[useSubmit] Response NOT OK or result.success is false. URL:",n,"Throwing error:",s),Error(s)}}catch(s){console.error("[useSubmit] CATCH block error. URL:",n,"Error:",s);let e=s instanceof Error?s.message:"Unknown submit error occurred";return console.log("[useSubmit] Setting error state and status=error. URL:",n),l(Error(e)),o("error"),{success:!1,error:e}}};return console.log("[useSubmit] Returning state. Initial URL:",e,"Status:",n),{submit:c,data:s,error:a,status:n,isLoading:"loading"===n,reset:()=>{console.log("[useSubmit] reset function called."),t(null),l(null),o("idle")}}}}},function(e){e.O(0,[1451,3145,2971,2117,1744],function(){return e(e.s=182)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3939],{4291:function(e,s,t){Promise.resolve().then(t.bind(t,3260))},9763:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var r=t(2265),o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,s)=>{let t=(0,r.forwardRef)((t,n)=>{let{color:l="currentColor",size:i=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:m,...g}=t;return(0,r.createElement)("svg",{ref:n,...o,width:i,height:i,stroke:l,strokeWidth:d?24*Number(c)/Number(i):c,className:["lucide","lucide-".concat(a(e)),u].join(" "),...g},[...s.map(e=>{let[s,t]=e;return(0,r.createElement)(s,t)}),...Array.isArray(m)?m:[m]])});return t.displayName="".concat(e),t}},3639:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5863:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3260:function(e,s,t){"use strict";t.r(s);var r=t(7437),o=t(2265),a=t(9889),n=t(5863),l=t(3639);s.default=()=>{let[e,s]=(0,o.useState)(null),[t,i]=(0,o.useState)(""),[c,d]=(0,o.useState)(""),[u,m]=(0,o.useState)(0),[g,h]=(0,o.useState)(1),[p,x]=(0,o.useState)(t),[b,f]=(0,o.useState)(c);(0,o.useEffect)(()=>{let e=setTimeout(()=>{x(t),h(1)},500);return()=>clearTimeout(e)},[t]),(0,o.useEffect)(()=>{let e=setTimeout(()=>{f(c),h(1)},500);return()=>clearTimeout(e)},[c]),(0,o.useEffect)(()=>{h(1)},[u]);let j=(0,o.useCallback)(()=>{let e=new URLSearchParams;return e.append("page",g.toString()),e.append("limit","9"),p&&e.append("name",p),b&&e.append("location",b),u>0&&e.append("minRating",u.toString()),"/api/hotels?".concat(e.toString())},[g,p,b,u]),{data:N,error:v,isLoading:y}=(0,a.i)(j()),{data:w,error:S,isLoading:R}=(0,a.i)(e?"/api/hotels/".concat(e):null),L=e=>{s(e)},k=(null==N?void 0:N.total)?Math.ceil(N.total/9):0;return e?R?(0,r.jsxs)("div",{className:"container mx-auto p-4 text-center",children:[(0,r.jsx)(n.Z,{className:"h-8 w-8 animate-spin inline-block"})," Loading hotel details..."]}):S?(0,r.jsxs)("div",{className:"container mx-auto p-4 text-center text-red-500",children:[(0,r.jsx)(l.Z,{className:"inline-block mr-2"}),"Error loading hotel details: ",S.message]}):w?(0,r.jsxs)("div",{className:"container mx-auto p-4",children:[(0,r.jsx)("button",{onClick:()=>{s(null)},className:"mb-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"← Back to Hotels List"}),(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:w.name}),(0,r.jsxs)("p",{className:"text-gray-600 mb-1",children:[w.address,", ",w.city,", ",w.country]}),null!==w.rating&&void 0!==w.rating&&(0,r.jsxs)("p",{className:"mb-4",children:["Rating: ",w.rating.toFixed(1)," / 5"]}),w.images&&w.images.length>0&&(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:w.images.map((e,s)=>(0,r.jsx)("img",{src:e||"/images/placeholder_hotel.png",alt:"".concat(w.name," image ").concat(s+1),className:"rounded-lg shadow-md w-full h-64 object-cover",onError:e=>e.currentTarget.src="/images/placeholder_hotel.png"},s))}),w.description&&(0,r.jsx)("p",{className:"text-lg mb-4",children:w.description}),w.amenities&&w.amenities.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Amenities:"}),(0,r.jsx)("ul",{className:"list-disc list-inside mb-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:w.amenities.map(e=>(0,r.jsx)("li",{children:e},e))})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Rooms"}),w.rooms&&w.rooms.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.rooms.map(e=>(0,r.jsxs)("div",{className:"border p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow bg-white",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-1",children:e.room_type_name}),e.description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,r.jsxs)("p",{className:"text-gray-700 mb-1",children:["Capacity: ",e.capacity_adults," Adults",e.capacity_children?" + ".concat(e.capacity_children," Children"):""]}),(0,r.jsxs)("p",{className:"text-lg font-medium text-green-600",children:["$",e.price_per_night," / night"]}),e.amenities&&e.amenities.length>0&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-500",children:"Room Amenities:"}),(0,r.jsx)("ul",{className:"list-disc list-inside text-xs text-gray-600",children:e.amenities.map(e=>(0,r.jsx)("li",{children:e},e))})]}),e.images&&e.images.length>0&&(0,r.jsx)("img",{src:e.images[0]||"/images/placeholder_room.png",alt:e.room_type_name,className:"w-full h-32 object-cover rounded-md mt-3",onError:e=>e.currentTarget.src="/images/placeholder_room.png"})]},e.id))}):(0,r.jsx)("p",{children:"No rooms listed for this hotel at the moment."})]}):(0,r.jsx)("div",{className:"container mx-auto p-4 text-center",children:"Hotel not found."}):(0,r.jsxs)("div",{className:"container mx-auto p-4",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Explore Our Hotels"}),(0,r.jsx)("div",{className:"mb-8 p-4 border rounded-lg shadow-sm bg-gray-50",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"searchTerm",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search by Name"}),(0,r.jsx)("input",{type:"text",id:"searchTerm",placeholder:"e.g., Sunset Paradise",className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",value:t,onChange:e=>i(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"locationFilter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Location (City/Country)"}),(0,r.jsx)("input",{type:"text",id:"locationFilter",placeholder:"e.g., Maldives or Switzerland",className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",value:c,onChange:e=>d(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"minRating",className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Rating"}),(0,r.jsxs)("select",{id:"minRating",className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",value:u,onChange:e=>m(Number(e.target.value)),children:[(0,r.jsx)("option",{value:"0",children:"Any Rating"}),(0,r.jsx)("option",{value:"1",children:"1+ Star"}),(0,r.jsx)("option",{value:"2",children:"2+ Stars"}),(0,r.jsx)("option",{value:"3",children:"3+ Stars"}),(0,r.jsx)("option",{value:"4",children:"4+ Stars"}),(0,r.jsx)("option",{value:"4.5",children:"4.5+ Stars"})]})]})]})}),y&&(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(n.Z,{className:"h-8 w-8 animate-spin inline-block"})," Loading hotels..."]}),v&&(0,r.jsxs)("div",{className:"text-center text-red-500",children:[(0,r.jsx)(l.Z,{className:"inline-block mr-2"}),"Error loading hotels: ",v.message]}),!y&&!v&&N&&N.data.length>0&&(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.data.map(e=>(0,r.jsxs)("div",{className:"border p-4 rounded-lg shadow-sm hover:shadow-lg transition-shadow cursor-pointer bg-white flex flex-col justify-between",onClick:()=>L(e.id),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("img",{src:e.images&&e.images.length>0?e.images[0]:"/images/placeholder_hotel.png",alt:e.name,className:"w-full h-48 object-cover rounded-md mb-3",onError:e=>e.currentTarget.src="/images/placeholder_hotel.png"}),(0,r.jsx)("h2",{className:"text-xl font-semibold mb-1",children:e.name}),(0,r.jsxs)("p",{className:"text-gray-600 text-sm mb-1",children:[e.address,", ",e.city]}),null!==e.rating&&void 0!==e.rating&&(0,r.jsxs)("p",{className:"text-yellow-500 mb-2",children:["Rating: ",e.rating.toFixed(1)," / 5"]}),e.description&&(0,r.jsx)("p",{className:"text-sm text-gray-700 truncate mb-2",children:e.description})]}),(0,r.jsx)("button",{onClick:s=>{s.stopPropagation(),L(e.id)},className:"mt-auto w-full px-3 py-2 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 transition-colors",children:"View Details"})]},e.id))}),!y&&!v&&N&&0===N.data.length&&(0,r.jsx)("p",{className:"text-center text-gray-500",children:"No hotels found matching your criteria. Try adjusting your filters."}),k>1&&(0,r.jsxs)("div",{className:"mt-8 flex justify-center items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>h(e=>Math.max(1,e-1)),disabled:1===g||y,className:"px-4 py-2 border rounded-md bg-white hover:bg-gray-100 disabled:opacity-50",children:"Previous"}),Array.from({length:k},(e,s)=>s+1).map(e=>(0,r.jsx)("button",{onClick:()=>h(e),disabled:y,className:"px-4 py-2 border rounded-md ".concat(g===e?"bg-blue-500 text-white":"bg-white hover:bg-gray-100"),children:e},e)),(0,r.jsx)("button",{onClick:()=>h(e=>Math.min(k,e+1)),disabled:g===k||y,className:"px-4 py-2 border rounded-md bg-white hover:bg-gray-100 disabled:opacity-50",children:"Next"})]})]})}},9889:function(e,s,t){"use strict";t.d(s,{i:function(){return o},q:function(){return a}});var r=t(2265);function o(e,s){var t;console.log("[useFetch] Hook initialized/re-rendered. URL:",e);let[o,a]=(0,r.useState)({data:null,error:null,status:"idle"}),n=JSON.stringify(s);return(0,r.useEffect)(()=>{console.log("[useFetch] useEffect triggered. URL:",e),(async()=>{if(console.log("[useFetch] fetchData started. URL:",e),!e){console.log("[useFetch] URL is null, setting state to idle/null."),a({data:null,error:null,status:"idle"});return}console.log("[useFetch] Resetting state and setting status to loading."),a({data:null,error:null,status:"loading"});try{let s;let t=JSON.parse(n||"{}");console.log("[useFetch] Attempting fetch. URL:",e,"Options:",t);let r=await fetch(e,{...t,credentials:"include"});console.log("[useFetch] Fetch completed. URL:",e,"Status:",r.status);try{console.log("[useFetch] Attempting response.json(). URL:",e),s=await r.json(),console.log("[useFetch] response.json() successful. URL:",e,"Result:",s)}catch(s){throw console.error("[useFetch] response.json() FAILED. URL:",e,"Error:",s),Error("Request failed with status ".concat(r.status," and non-JSON response."))}if(!r.ok){let t=(null==s?void 0:s.message)||r.statusText||"HTTP error! Status: ".concat(r.status);throw console.warn("[useFetch] Response not OK. Status:",r.status,"URL:",e,"Throwing error:",t),Error(t)}if(console.log("[useFetch] Response OK. Checking result.success. URL:",e),s.success)console.log("[useFetch] result.success is true. URL:",e),void 0!==s.data?(console.log("[useFetch] Setting state data and status=success. URL:",e,"Data:",s.data),a({data:s.data,error:null,status:"success"})):(console.warn("[useFetch] Fetch successful (result.success=true) but result.data is undefined. Setting state data=null, status=success. URL: ".concat(e)),a({data:null,error:null,status:"success"}));else{let t=s.message||"API returned success: false";throw console.warn("[useFetch] result.success is false. URL:",e,"Throwing error:",t),Error(t)}}catch(t){console.error("[useFetch] CATCH block error for URL ".concat(e,":"),t);let s=t instanceof Error?t:Error("Unknown fetch error occurred");console.log("[useFetch] Setting state error and status=error. URL:",e),a({data:null,error:s,status:"error"})}})()},[e,n]),console.log("[useFetch] Returning combined state for URL:",e,{data:o.data,error:null===(t=o.error)||void 0===t?void 0:t.message,status:o.status}),{data:o.data,error:o.error,status:o.status,isLoading:"loading"===o.status}}function a(e){console.log("[useSubmit] Hook initialized/re-rendered. Initial URL:",e);let[s,t]=(0,r.useState)(null),[o,a]=(0,r.useState)(null),[n,l]=(0,r.useState)("idle"),i=async function(s){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",o=arguments.length>2?arguments[2]:void 0,n=o||e;if(console.log("[useSubmit] submit function called. Target URL:",n,"Method:",r),l("loading"),t(null),a(null),!n)return console.error("[useSubmit] No URL provided (initial or override). Aborting submission."),a(Error("No URL specified for submission.")),l("error"),{success:!1,error:"No URL specified for submission."};try{let e;let o={method:r,headers:{"Content-Type":"application/json",Accept:"application/json"},body:"DELETE"!==r?JSON.stringify(s):void 0,credentials:"include"};console.log("[useSubmit] Attempting fetch. URL:",n,"Options:",o);let a=await fetch(n,o);console.log("[useSubmit] Fetch completed. URL:",n,"Status:",a.status);try{console.log("[useSubmit] Attempting response.json(). URL:",n),204===a.status||"0"===a.headers.get("content-length")?(console.log("[useSubmit] Received 204 No Content or empty body. Assuming success."),e={success:!0}):e=await a.json(),console.log("[useSubmit] response.json() successful or handled empty. URL:",n,"Result:",e)}catch(e){throw console.error("[useSubmit] response.json() FAILED. URL:",n,"Error:",e),Error("Request failed with status ".concat(a.status," and non-JSON response."))}if(console.log("[useSubmit] Checking response.ok and result.success. URL:",n),a.ok&&(void 0===e.success||!0===e.success)){if(console.log("[useSubmit] Response OK and result.success is true/undefined. URL:",n),void 0!==e.data)return console.log("[useSubmit] Setting data and status=success. URL:",n,"Data:",e.data),t(e.data),l("success"),{success:!0,data:e.data};return t(null),l("success"),console.warn("[useSubmit] Submit successful (result.success=true/undefined) but result.data is undefined. Setting data=null, status=success. URL: ".concat(n)),{success:!0,data:null}}{let s=e.message||"API Error: Status ".concat(a.status,", Success Flag: ").concat(e.success);throw console.warn("[useSubmit] Response NOT OK or result.success is false. URL:",n,"Throwing error:",s),Error(s)}}catch(s){console.error("[useSubmit] CATCH block error. URL:",n,"Error:",s);let e=s instanceof Error?s.message:"Unknown submit error occurred";return console.log("[useSubmit] Setting error state and status=error. URL:",n),a(Error(e)),l("error"),{success:!1,error:e}}};return console.log("[useSubmit] Returning state. Initial URL:",e,"Status:",n),{submit:i,data:s,error:o,status:n,isLoading:"loading"===n,reset:()=>{console.log("[useSubmit] reset function called."),t(null),a(null),l("idle")}}}}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=4291)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{7556:function(e,t,s){Promise.resolve().then(s.t.bind(s,9974,23)),Promise.resolve().then(s.t.bind(s,2778,23)),Promise.resolve().then(s.bind(s,9573))},9573:function(e,t,s){"use strict";s.d(t,{Providers:function(){return R}});var a=s(7437),r=s(2265),l=s(4603),o=s(7648),n=s(3145),i=s(9376),c=s(9889),d=s(875),u=s(3247),h=s(9801),x=s(7692),m=s(2489),g=s(6840),b=()=>{let[e,t]=(0,r.useState)(!1),s=(0,i.usePathname)(),{isAuthenticated:b,user:f,isLoading:p,logout:v}=(0,l.a)(),[y,j]=(0,r.useState)({destinations:!1,activities:!1,packages:!1}),{data:N}=(0,c.i)("/api/destinations"),k=N||[],{data:w}=(0,c.i)("/api/activities"),S=w||[],{data:R}=(0,c.i)("/api/packages"),L=(null==R?void 0:R.packages)||[],A=()=>{t(!1),j({destinations:!1,activities:!1,packages:!1})},C=()=>{v(),A()},U=[{name:"Home",href:"/"},{name:"About",href:"/about"},{name:"Contact",href:"/contact"}];return(0,a.jsx)("header",{className:"bg-white shadow-xl sticky top-0 z-50 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-3 md:py-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(o.default,{href:"/",className:"inline-block",onClick:A,children:(0,a.jsx)(n.default,{src:"/images/logo.jpg",alt:"Reach Andaman Logo",width:1171,height:455,className:"h-8 md:h-10 w-auto",priority:!0})})}),(0,a.jsxs)("nav",{className:"hidden md:flex items-center space-x-6 lg:space-x-8",children:[(0,a.jsx)(o.default,{href:"/",className:"text-sm lg:text-base font-medium text-gray-600 hover:text-blue-600 transition-colors ".concat("/"===s?"text-blue-600 border-b-2 border-blue-600":""),children:"Home"}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)(o.default,{href:"/destinations",className:"text-sm lg:text-base font-medium text-gray-600 hover:text-blue-600 transition-colors flex items-center ".concat(s.startsWith("/destinations")?"text-blue-600 border-b-2 border-blue-600":""),children:["Destinations",(0,a.jsx)(d.Z,{size:16,className:"ml-1 group-hover:rotate-180 transition-transform duration-200"})]}),(0,a.jsx)("div",{className:"absolute left-0 mt-2 w-56 rounded-2xl bg-white shadow-lg border border-gray-100 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform origin-top-left",children:(0,a.jsxs)("div",{className:"py-2 px-1",children:[k.length>0?k.slice(0,5).map(e=>(0,a.jsx)(o.default,{href:"/destinations/".concat(e.id),className:"block px-4 py-2.5 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-xl",children:e.name},e.id)):(0,a.jsx)("span",{className:"block px-4 py-2.5 text-sm text-gray-400",children:"Loading..."}),(0,a.jsx)(o.default,{href:"/destinations",className:"block px-4 py-2.5 text-sm font-semibold text-blue-600 hover:bg-blue-50 hover:text-blue-700 rounded-xl mt-1 border-t border-gray-100",children:"View All"})]})})]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)(o.default,{href:"/packages",className:"text-sm lg:text-base font-medium text-gray-600 hover:text-blue-600 transition-colors flex items-center ".concat(s.startsWith("/packages")?"text-blue-600 border-b-2 border-blue-600":""),children:["Packages",(0,a.jsx)(d.Z,{size:16,className:"ml-1 group-hover:rotate-180 transition-transform duration-200"})]}),(0,a.jsx)("div",{className:"absolute left-0 mt-2 w-56 rounded-2xl bg-white shadow-lg border border-gray-100 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform origin-top-left",children:(0,a.jsxs)("div",{className:"py-2 px-1",children:[L.length>0?L.slice(0,5).map(e=>(0,a.jsx)(o.default,{href:"/packages/".concat(e.id),className:"block px-4 py-2.5 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-xl",children:e.name},e.id)):(0,a.jsx)("span",{className:"block px-4 py-2.5 text-sm text-gray-400",children:"Loading..."}),(0,a.jsx)(o.default,{href:"/packages",className:"block px-4 py-2.5 text-sm font-semibold text-blue-600 hover:bg-blue-50 hover:text-blue-700 rounded-xl mt-1 border-t border-gray-100",children:"View All"})]})})]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)(o.default,{href:"/activities",className:"text-sm lg:text-base font-medium text-gray-600 hover:text-blue-600 transition-colors flex items-center ".concat(s.startsWith("/activities")?"text-blue-600 border-b-2 border-blue-600":""),children:["Activities",(0,a.jsx)(d.Z,{size:16,className:"ml-1 group-hover:rotate-180 transition-transform duration-200"})]}),(0,a.jsx)("div",{className:"absolute left-0 mt-2 w-56 rounded-2xl bg-white shadow-lg border border-gray-100 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform origin-top-left",children:(0,a.jsxs)("div",{className:"py-2 px-1",children:[S.length>0?S.slice(0,5).map(e=>(0,a.jsx)(o.default,{href:"/activities/".concat(e.id),className:"block px-4 py-2.5 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700 rounded-xl",children:e.name},e.id)):(0,a.jsx)("span",{className:"block px-4 py-2.5 text-sm text-gray-400",children:"Loading..."}),(0,a.jsx)(o.default,{href:"/activities",className:"block px-4 py-2.5 text-sm font-semibold text-blue-600 hover:bg-blue-50 hover:text-blue-700 rounded-xl mt-1 border-t border-gray-100",children:"View All"})]})})]}),U.filter(e=>"Home"!==e.name).map(e=>(0,a.jsx)(o.default,{href:e.href,className:"text-sm lg:text-base font-medium text-gray-600 hover:text-blue-600 transition-colors ".concat(s===e.href?"text-blue-600 border-b-2 border-blue-600":""),children:e.name},e.name))]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 md:space-x-4",children:[(0,a.jsxs)("button",{className:"text-gray-500 hover:text-blue-600 p-1.5 hover:bg-blue-50 rounded-full transition-colors",children:[(0,a.jsx)("span",{className:"sr-only",children:"Search"}),(0,a.jsx)(u.Z,{size:20})]}),(0,a.jsx)("div",{className:"hidden md:flex items-center space-x-4",children:p?(0,a.jsx)("div",{className:"h-5 w-5 rounded-full border-2 border-blue-500 border-t-transparent animate-spin"}):b?(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(null==f?void 0:f.role_id)===3&&(0,a.jsx)(o.default,{href:"/vendor/dashboard",className:"text-sm text-gray-600 hover:text-blue-600 transition-colors",children:"Vendor Area"}),(0,a.jsxs)(o.default,{href:"/user/dashboard",className:"flex items-center text-gray-600 hover:text-blue-600 p-1.5 hover:bg-blue-50 rounded-full transition-colors",title:"My Account",children:[(0,a.jsx)(h.Z,{size:20}),(0,a.jsx)("span",{className:"sr-only",children:"Profile"})]}),(0,a.jsxs)("button",{onClick:C,className:"text-sm text-gray-600 hover:text-red-600 transition-colors flex items-center p-1.5 hover:bg-red-50 rounded-full",title:"Logout",children:[(0,a.jsx)(x.Z,{size:18}),(0,a.jsx)("span",{className:"hidden lg:inline ml-1",children:"Logout"})]})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(o.default,{href:"/auth/signup",className:"text-sm font-medium text-blue-600 hover:text-blue-800 px-4 py-2 rounded-full hover:bg-blue-50 transition-colors",children:"Sign Up"}),(0,a.jsx)(o.default,{href:"/auth/signin",className:"text-sm font-medium bg-blue-600 text-white px-5 py-2 rounded-full hover:bg-blue-700 transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:"Sign In"})]})}),(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsxs)("button",{onClick:()=>t(!e),className:"text-gray-600 hover:text-blue-600 p-1.5 hover:bg-blue-50 rounded-full transition-colors",children:[(0,a.jsx)("span",{className:"sr-only",children:"Toggle Menu"}),e?(0,a.jsx)(m.Z,{size:24}):(0,a.jsx)(g.Z,{size:24})]})})]})]}),e&&(0,a.jsxs)("div",{className:"md:hidden absolute top-full left-0 w-full bg-white shadow-lg border-t border-gray-200 z-40 max-h-[calc(100vh-60px)] overflow-y-auto",children:[" ",(0,a.jsxs)("nav",{className:"flex flex-col px-4 py-4 space-y-1",children:[" ",(0,a.jsx)(o.default,{href:"/",className:"block px-3 py-2.5 rounded-xl text-base font-medium ".concat("/"===s?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"),onClick:A,children:"Home"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("button",{onClick:()=>j(e=>({...e,destinations:!e.destinations,activities:!1,packages:!1})),className:"flex justify-between items-center w-full px-3 py-2.5 rounded-xl text-base font-medium ".concat(s.startsWith("/destinations")||y.destinations?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"),children:[(0,a.jsx)("span",{children:"Destinations"}),(0,a.jsx)(d.Z,{size:18,className:"transition-transform duration-200 ".concat(y.destinations?"rotate-180":"")})]}),y.destinations&&(0,a.jsxs)("div",{className:"pl-4 space-y-0.5 mt-1 border-l-2 border-blue-100 ml-1",children:[" ",(0,a.jsx)(o.default,{href:"/destinations",className:"block px-3 py-2 rounded-lg text-sm font-medium text-blue-600 hover:bg-blue-50 hover:text-blue-700",onClick:A,children:"All Destinations"}),k.length>0?k.slice(0,5).map(e=>(0,a.jsx)(o.default,{href:"/destinations/".concat(e.id),className:"block px-3 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700",onClick:A,children:e.name},e.id)):(0,a.jsx)("span",{className:"block px-3 py-2 text-sm text-gray-400",children:"Loading..."})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("button",{onClick:()=>j(e=>({...e,packages:!e.packages,destinations:!1,activities:!1})),className:"flex justify-between items-center w-full px-3 py-2.5 rounded-xl text-base font-medium ".concat(s.startsWith("/packages")||y.packages?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"),children:[(0,a.jsx)("span",{children:"Packages"}),(0,a.jsx)(d.Z,{size:18,className:"transition-transform duration-200 ".concat(y.packages?"rotate-180":"")})]}),y.packages&&(0,a.jsxs)("div",{className:"pl-4 space-y-0.5 mt-1 border-l-2 border-blue-100 ml-1",children:[(0,a.jsx)(o.default,{href:"/packages",className:"block px-3 py-2 rounded-lg text-sm font-medium text-blue-600 hover:bg-blue-50 hover:text-blue-700",onClick:A,children:"All Packages"}),L.length>0?L.slice(0,5).map(e=>(0,a.jsx)(o.default,{href:"/packages/".concat(e.id),className:"block px-3 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700",onClick:A,children:e.name},e.id)):(0,a.jsx)("span",{className:"block px-3 py-2 text-sm text-gray-400",children:"Loading..."})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("button",{onClick:()=>j(e=>({...e,activities:!e.activities,destinations:!1,packages:!1})),className:"flex justify-between items-center w-full px-3 py-2.5 rounded-xl text-base font-medium ".concat(s.startsWith("/activities")||y.activities?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"),children:[(0,a.jsx)("span",{children:"Activities"}),(0,a.jsx)(d.Z,{size:18,className:"transition-transform duration-200 ".concat(y.activities?"rotate-180":"")})]}),y.activities&&(0,a.jsxs)("div",{className:"pl-4 space-y-0.5 mt-1 border-l-2 border-blue-100 ml-1",children:[(0,a.jsx)(o.default,{href:"/activities",className:"block px-3 py-2 rounded-lg text-sm font-medium text-blue-600 hover:bg-blue-50 hover:text-blue-700",onClick:A,children:"All Activities"}),S.length>0?S.slice(0,5).map(e=>(0,a.jsx)(o.default,{href:"/activities/".concat(e.id),className:"block px-3 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700",onClick:A,children:e.name},e.id)):(0,a.jsx)("span",{className:"block px-3 py-2 text-sm text-gray-400",children:"Loading..."})]})]}),U.filter(e=>"Home"!==e.name).map(e=>(0,a.jsx)(o.default,{href:e.href,className:"block px-3 py-2.5 rounded-xl text-base font-medium ".concat(s===e.href?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"),onClick:A,children:e.name},e.name)),(0,a.jsx)("div",{className:"pt-4 pb-2 border-t border-gray-200",children:p?(0,a.jsx)("div",{className:"flex justify-center py-2",children:(0,a.jsx)("div",{className:"h-5 w-5 rounded-full border-2 border-blue-500 border-t-transparent animate-spin"})}):b?(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"px-3 py-2 text-sm font-medium text-gray-500",children:["Welcome, ",(null==f?void 0:f.first_name)||(null==f?void 0:f.email)]}),(null==f?void 0:f.role_id)===3&&(0,a.jsx)(o.default,{href:"/vendor/dashboard",className:"block px-3 py-2.5 rounded-xl text-base font-medium text-gray-700 hover:bg-gray-100 hover:text-gray-900",onClick:A,children:"Vendor Dashboard"}),(0,a.jsx)(o.default,{href:"/user/dashboard",className:"block px-3 py-2.5 rounded-xl text-base font-medium text-gray-700 hover:bg-gray-100 hover:text-gray-900",onClick:A,children:"My Account"}),(0,a.jsx)(o.default,{href:"/user/bookings",className:"block px-3 py-2.5 rounded-xl text-base font-medium text-gray-700 hover:bg-gray-100 hover:text-gray-900",onClick:A,children:"My Bookings"}),(0,a.jsx)("button",{onClick:C,className:"block w-full text-left px-3 py-2.5 rounded-xl text-base font-medium text-red-600 hover:bg-red-50 hover:text-red-700",children:"Logout"})]}):(0,a.jsxs)("div",{className:"space-y-2 px-3 pt-2",children:[(0,a.jsx)(o.default,{href:"/auth/signin",className:"block w-full py-2.5 rounded-full text-center text-base font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors",onClick:A,children:"Sign In"}),(0,a.jsx)(o.default,{href:"/auth/signup",className:"block w-full py-2.5 rounded-full text-center text-base font-medium border border-blue-600 text-blue-600 hover:bg-blue-50 hover:text-blue-700 transition-colors",onClick:A,children:"Sign Up"})]})})]})]})]})})},f=s(9219),p=s(7760),v=s(2351),y=s(3041),j=s(9345),N=()=>{let e=new Date().getFullYear();return(0,a.jsx)("footer",{className:"bg-gray-800 text-white",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-12",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Reach Andaman Travel"}),(0,a.jsx)("p",{className:"text-gray-300 mb-4",children:"Your ultimate guide to exploring the beautiful Andaman Islands. We provide comprehensive travel information, booking services, and curated experiences."}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("a",{href:"#",className:"text-gray-300 hover:text-white",children:(0,a.jsx)(f.Z,{size:20})}),(0,a.jsx)("a",{href:"#",className:"text-gray-300 hover:text-white",children:(0,a.jsx)(p.Z,{size:20})}),(0,a.jsx)("a",{href:"#",className:"text-gray-300 hover:text-white",children:(0,a.jsx)(v.Z,{size:20})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Quick Links"}),(0,a.jsxs)("ul",{className:"space-y-2",children:[(0,a.jsx)("li",{children:(0,a.jsx)(o.default,{href:"/destinations",className:"text-gray-300 hover:text-white",children:"Destinations"})}),(0,a.jsx)("li",{children:(0,a.jsx)(o.default,{href:"/packages",className:"text-gray-300 hover:text-white",children:"Travel Packages"})}),(0,a.jsx)("li",{children:(0,a.jsx)(o.default,{href:"/activities",className:"text-gray-300 hover:text-white",children:"Activities"})}),(0,a.jsx)("li",{children:(0,a.jsx)(o.default,{href:"/blog",className:"text-gray-300 hover:text-white",children:"Travel Blog"})}),(0,a.jsx)("li",{children:(0,a.jsx)(o.default,{href:"/faq",className:"text-gray-300 hover:text-white",children:"FAQs"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"For Vendors"}),(0,a.jsxs)("ul",{className:"space-y-2",children:[(0,a.jsx)("li",{children:(0,a.jsx)(o.default,{href:"/vendor/register",className:"text-gray-300 hover:text-white",children:"Register as Vendor"})}),(0,a.jsx)("li",{children:(0,a.jsx)(o.default,{href:"/vendor/login",className:"text-gray-300 hover:text-white",children:"Vendor Login"})}),(0,a.jsx)("li",{children:(0,a.jsx)(o.default,{href:"/vendor/how-it-works",className:"text-gray-300 hover:text-white",children:"How It Works"})}),(0,a.jsx)("li",{children:(0,a.jsx)(o.default,{href:"/vendor/terms",className:"text-gray-300 hover:text-white",children:"Terms for Vendors"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Contact Us"}),(0,a.jsxs)("ul",{className:"space-y-2",children:[(0,a.jsxs)("li",{className:"flex items-center",children:[(0,a.jsx)(y.Z,{size:18,className:"mr-2"}),(0,a.jsx)("span",{className:"text-gray-300",children:"+91 99999999"})]}),(0,a.jsxs)("li",{className:"flex items-center",children:[(0,a.jsx)(j.Z,{size:18,className:"mr-2"}),(0,a.jsx)("a",{href:"mailto:info@andamantravel.com",className:"text-gray-300 hover:text-white",children:"info@reachandaman.com"})]}),(0,a.jsx)("li",{className:"text-gray-300 mt-2",children:"Port Blair, Andaman and Nicobar Islands, India"})]})]})]}),(0,a.jsxs)("div",{className:"border-t border-gray-700 mt-8 pt-8 text-center text-gray-400",children:[(0,a.jsxs)("p",{children:["\xa9 ",e," Reach Andaman Travel Platform. All rights reserved."]}),(0,a.jsxs)("div",{className:"mt-2 space-x-4",children:[(0,a.jsx)(o.default,{href:"/privacy-policy",className:"hover:text-white",children:"Privacy Policy"}),(0,a.jsx)(o.default,{href:"/terms-of-service",className:"hover:text-white",children:"Terms of Service"}),(0,a.jsx)(o.default,{href:"/refund-policy",className:"hover:text-white",children:"Refund Policy"})]})]})]})})},k=s(5922),w=s(4438);let S=e=>{let{...t}=e,{theme:s="system"}=(0,k.F)();return(0,a.jsx)(w.x7,{theme:s,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};function R(e){let{children:t}=e;return(0,a.jsx)(l.H,{children:(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,a.jsx)(b,{})," ",(0,a.jsxs)("main",{className:"flex-grow",children:[t," "]}),(0,a.jsx)(N,{})," ",(0,a.jsx)(S,{position:"top-right",richColors:!0})," "]})})}},4603:function(e,t,s){"use strict";s.d(t,{H:function(){return n},a:function(){return i}});var a=s(7437),r=s(2265),l=s(9376);let o=(0,r.createContext)(void 0),n=e=>{let{children:t}=e,[s,n]=(0,r.useState)(null),[i,c]=(0,r.useState)(!0),d=(0,l.useRouter)(),u=(0,r.useCallback)(async()=>{try{console.log("Checking auth state via /api/auth/me...");let e=await fetch("/api/auth/me",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"}),t=await e.json();e.ok&&t.success&&t.data?(console.log("Auth check successful, user found:",t.data),n(t.data)):(console.log("Auth check failed or no user session found."),n(null))}catch(e){console.error("Error checking auth state:",e),n(null)}finally{c(!1)}},[]);(0,r.useEffect)(()=>{c(!0),u()},[u]);let h=(0,r.useCallback)(async(e,t)=>{c(!0);try{console.log("Attempting login with:",e);let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t}),credentials:"include"}),a=await s.json();if(s.ok&&a.success&&a.data)return console.log("Login successful:",a.data),n(a.data),c(!1),!0;return console.error("Login API failed:",a.message),n(null),c(!1),!1}catch(e){return console.error("Login fetch error:",e),n(null),c(!1),!1}},[]),x=(0,r.useCallback)(async(e,t,s)=>{c(!0);try{console.log("Attempting registration for:",t);let a=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:s})}),r=await a.json();if(a.ok&&r.success)return console.log("Registration successful",r.message),c(!1),{success:!0,message:r.message||"Registration successful!"};return console.error("Registration API failed:",r.message),c(!1),{success:!1,message:r.message||"Registration failed."}}catch(e){return console.error("Registration fetch error:",e),c(!1),{success:!1,message:"An unexpected error occurred."}}},[]),m=(0,r.useCallback)(async()=>{try{console.log("Logging out..."),await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(e){console.error("Logout API call failed:",e)}finally{n(null),console.log("Redirecting to signin page after logout."),d.push("/auth/signin")}},[d]);return(0,a.jsx)(o.Provider,{value:{user:s,isAuthenticated:!!s,isLoading:i,login:h,register:x,logout:m,checkAuthState:u},children:t})},i=()=>{let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9889:function(e,t,s){"use strict";s.d(t,{i:function(){return r},q:function(){return l}});var a=s(2265);function r(e,t){console.log("[useFetch] Hook initialized/re-rendered. URL:",e);let[s,r]=(0,a.useState)(null),[l,o]=(0,a.useState)(null),[n,i]=(0,a.useState)("idle"),c=JSON.stringify(t);return(0,a.useEffect)(()=>{console.log("[useFetch] useEffect triggered. URL:",e),(async()=>{if(console.log("[useFetch] fetchData started. URL:",e),!e){console.log("[useFetch] URL is null, setting status to idle."),i("idle"),r(null),o(null);return}console.log("[useFetch] Resetting state and setting status to loading."),i("loading"),r(null),o(null);try{let t;let s=JSON.parse(c||"{}");console.log("[useFetch] Attempting fetch. URL:",e,"Options:",s);let a=await fetch(e,{...s,credentials:"include"});console.log("[useFetch] Fetch completed. URL:",e,"Status:",a.status);try{console.log("[useFetch] Attempting response.json(). URL:",e),t=await a.json(),console.log("[useFetch] response.json() successful. URL:",e,"Result:",t)}catch(t){throw console.error("[useFetch] response.json() FAILED. URL:",e,"Error:",t),Error("Request failed with status ".concat(a.status," and non-JSON response."))}if(!a.ok){let s=(null==t?void 0:t.message)||a.statusText||"HTTP error! Status: ".concat(a.status);throw console.warn("[useFetch] Response not OK. Status:",a.status,"URL:",e,"Throwing error:",s),Error(s)}if(console.log("[useFetch] Response OK. Checking result.success. URL:",e),t.success)console.log("[useFetch] result.success is true. URL:",e),void 0!==t.data?(console.log("[useFetch] Setting data and status=success. URL:",e,"Data:",t.data),r(t.data),i("success")):(r(null),i("success"),console.warn("[useFetch] Fetch successful (result.success=true) but result.data is undefined. Setting data=null, status=success. URL: ".concat(e)));else{let s=t.message||"API returned success: false";throw console.warn("[useFetch] result.success is false. URL:",e,"Throwing error:",s),Error(s)}}catch(t){console.error("[useFetch] CATCH block error for URL ".concat(e,":"),t),console.log("[useFetch] Setting error state and status=error. URL:",e),o(t instanceof Error?t:Error("Unknown fetch error occurred")),i("error")}})()},[e,c]),console.log("[useFetch] Returning state. URL:",e,"Status:",n),{data:s,error:l,status:n,isLoading:"loading"===n}}function l(e){console.log("[useSubmit] Hook initialized/re-rendered. URL:",e);let[t,s]=(0,a.useState)(null),[r,l]=(0,a.useState)(null),[o,n]=(0,a.useState)("idle"),i=async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST";console.log("[useSubmit] submit function called. URL:",e,"Method:",a),console.log("[useSubmit] Resetting state and setting status=loading."),n("loading"),s(null),l(null);try{let r;let l={method:a,headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t),credentials:"include"};console.log("[useSubmit] Attempting fetch. URL:",e,"Options:",l);let o=await fetch(e,l);console.log("[useSubmit] Fetch completed. URL:",e,"Status:",o.status);try{console.log("[useSubmit] Attempting response.json(). URL:",e),r=await o.json(),console.log("[useSubmit] response.json() successful. URL:",e,"Result:",r)}catch(t){throw console.error("[useSubmit] response.json() FAILED. URL:",e,"Error:",t),Error("Request failed with status ".concat(o.status," and non-JSON response."))}if(console.log("[useSubmit] Checking response.ok and result.success. URL:",e),o.ok&&r.success){if(console.log("[useSubmit] Response OK and result.success is true. URL:",e),void 0!==r.data)return console.log("[useSubmit] Setting data and status=success. URL:",e,"Data:",r.data),s(r.data),n("success"),{success:!0,data:r.data};return s(null),n("success"),console.warn("[useSubmit] Submit successful (result.success=true) but result.data is undefined. Setting data=null, status=success. URL: ".concat(e)),{success:!0,data:null}}{let t=r.message||"API Error: Status ".concat(o.status,", Success Flag: ").concat(r.success);throw console.warn("[useSubmit] Response NOT OK or result.success is false. URL:",e,"Throwing error:",t),Error(t)}}catch(s){console.error("[useSubmit] CATCH block error. URL:",e,"Error:",s);let t=s instanceof Error?s.message:"Unknown submit error occurred";return console.log("[useSubmit] Setting error state and status=error. URL:",e),l(Error(t)),n("error"),{success:!1,error:t}}};return console.log("[useSubmit] Returning state. URL:",e,"Status:",o),{submit:i,data:t,error:r,status:o,isLoading:"loading"===o,reset:()=>{console.log("[useSubmit] reset function called."),s(null),l(null),n("idle")}}}},2778:function(){}},function(e){e.O(0,[1919,2461,3847,7648,7844,2971,2117,1744],function(){return e(e.s=7556)}),_N_E=e.O()}]);